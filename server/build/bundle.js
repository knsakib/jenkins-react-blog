!function(e){function t(a){if(n[a])return n[a].exports;var r=n[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=26)}([function(e,t){e.exports=require("react")},function(e,t,n){"use strict";var a=function(){};e.exports=a},function(e,t){e.exports=require("prop-types")},function(e,t){e.exports=require("invariant")},function(e,t,n){"use strict";t.__esModule=!0;var a=(t.addLeadingSlash=function(e){return"/"===e.charAt(0)?e:"/"+e},t.stripLeadingSlash=function(e){return"/"===e.charAt(0)?e.substr(1):e},t.hasBasename=function(e,t){return new RegExp("^"+t+"(\\/|\\?|#|$)","i").test(e)});t.stripBasename=function(e,t){return a(e,t)?e.substr(t.length):e},t.stripTrailingSlash=function(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e},t.parsePath=function(e){var t=e||"/",n="",a="",r=t.indexOf("#");-1!==r&&(a=t.substr(r),t=t.substr(0,r));var l=t.indexOf("?");return-1!==l&&(n=t.substr(l),t=t.substr(0,l)),{pathname:t,search:"?"===n?"":n,hash:"#"===a?"":a}},t.createPath=function(e){var t=e.pathname,n=e.search,a=e.hash,r=t||"/";return n&&"?"!==n&&(r+="?"===n.charAt(0)?n:"?"+n),a&&"#"!==a&&(r+="#"===a.charAt(0)?a:"#"+a),r}},function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"f",function(){return r}),n.d(t,"c",function(){return l}),n.d(t,"e",function(){return o}),n.d(t,"g",function(){return i}),n.d(t,"d",function(){return u}),n.d(t,"b",function(){return s});var a=function(e){return"/"===e.charAt(0)?e:"/"+e},r=function(e){return"/"===e.charAt(0)?e.substr(1):e},l=function(e,t){return new RegExp("^"+t+"(\\/|\\?|#|$)","i").test(e)},o=function(e,t){return l(e,t)?e.substr(t.length):e},i=function(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e},u=function(e){var t=e||"/",n="",a="",r=t.indexOf("#");-1!==r&&(a=t.substr(r),t=t.substr(0,r));var l=t.indexOf("?");return-1!==l&&(n=t.substr(l),t=t.substr(0,l)),{pathname:t,search:"?"===n?"":n,hash:"#"===a?"":a}},s=function(e){var t=e.pathname,n=e.search,a=e.hash,r=t||"/";return n&&"?"!==n&&(r+="?"===n.charAt(0)?n:"?"+n),a&&"#"!==a&&(r+="#"===a.charAt(0)?a:"#"+a),r}},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(1),i=n.n(o),u=n(3),s=n.n(u),c=n(0),d=n.n(c),f=n(2),h=n.n(f),m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},p=function(e){function t(){var n,l,o;a(this,t);for(var i=arguments.length,u=Array(i),s=0;s<i;s++)u[s]=arguments[s];return n=l=r(this,e.call.apply(e,[this].concat(u))),l.state={match:l.computeMatch(l.props.history.location.pathname)},o=n,r(l,o)}return l(t,e),t.prototype.getChildContext=function(){return{router:m({},this.context.router,{history:this.props.history,route:{location:this.props.history.location,match:this.state.match}})}},t.prototype.computeMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}},t.prototype.componentWillMount=function(){var e=this,t=this.props,n=t.children,a=t.history;s()(null==n||1===d.a.Children.count(n),"A <Router> may have only one child element"),this.unlisten=a.listen(function(){e.setState({match:e.computeMatch(a.location.pathname)})})},t.prototype.componentWillReceiveProps=function(e){i()(this.props.history===e.history,"You cannot change <Router history>")},t.prototype.componentWillUnmount=function(){this.unlisten()},t.prototype.render=function(){var e=this.props.children;return e?d.a.Children.only(e):null},t}(d.a.Component);p.propTypes={history:h.a.object.isRequired,children:h.a.node},p.contextTypes={router:h.a.object},p.childContextTypes={router:h.a.object.isRequired},t.a=p},function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return u});var a=n(15),r=n(16),l=n(5),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=function(e,t,n,r){var i=void 0;"string"==typeof e?(i=Object(l.d)(e),i.state=t):(i=o({},e),void 0===i.pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return n&&(i.key=n),r?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=Object(a.default)(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i},u=function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&Object(r.default)(e.state,t.state)}},function(e,t,n){"use strict";var a=n(35),r=n.n(a),l={},o=0,i=function(e,t){var n=""+t.end+t.strict+t.sensitive,a=l[n]||(l[n]={});if(a[e])return a[e];var i=[],u=r()(e,i,t),s={re:u,keys:i};return o<1e4&&(a[e]=s,o++),s},u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"string"==typeof t&&(t={path:t});var n=t,a=n.path,r=void 0===a?"/":a,l=n.exact,o=void 0!==l&&l,u=n.strict,s=void 0!==u&&u,c=n.sensitive,d=void 0!==c&&c,f=i(r,{end:o,strict:s,sensitive:d}),h=f.re,m=f.keys,p=h.exec(e);if(!p)return null;var b=p[0],g=p.slice(1),y=e===b;return o&&!y?null:{path:r,url:"/"===r&&""===b?"/":b,isExact:y,params:m.reduce(function(e,t,n){return e[t.name]=g[n],e},{})}};t.a=u},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.locationsAreEqual=t.createLocation=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},l=n(15),o=a(l),i=n(16),u=a(i),s=n(4);t.createLocation=function(e,t,n,a){var l=void 0;"string"==typeof e?(l=(0,s.parsePath)(e),l.state=t):(l=r({},e),void 0===l.pathname&&(l.pathname=""),l.search?"?"!==l.search.charAt(0)&&(l.search="?"+l.search):l.search="",l.hash?"#"!==l.hash.charAt(0)&&(l.hash="#"+l.hash):l.hash="",void 0!==t&&void 0===l.state&&(l.state=t));try{l.pathname=decodeURI(l.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+l.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return n&&(l.key=n),a?l.pathname?"/"!==l.pathname.charAt(0)&&(l.pathname=(0,o.default)(l.pathname,a.pathname)):l.pathname=a.pathname:l.pathname||(l.pathname="/"),l},t.locationsAreEqual=function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&(0,u.default)(e.state,t.state)}},function(e,t,n){"use strict";t.__esModule=!0;var a=n(1),r=function(e){return e&&e.__esModule?e:{default:e}}(a),l=function(){var e=null,t=function(t){return(0,r.default)(null==e,"A history supports only one prompt at a time"),e=t,function(){e===t&&(e=null)}},n=function(t,n,a,l){if(null!=e){var o="function"==typeof e?e(t,n):e;"string"==typeof o?"function"==typeof a?a(o,l):((0,r.default)(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),l(!0)):l(!1!==o)}else l(!0)},a=[];return{setPrompt:t,confirmTransitionTo:n,appendListener:function(e){var t=!0,n=function(){t&&e.apply(void 0,arguments)};return a.push(n),function(){t=!1,a=a.filter(function(e){return e!==n})}},notifyListeners:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];a.forEach(function(e){return e.apply(void 0,t)})}}};t.default=l},function(e,t,n){"use strict";var a=n(1),r=n.n(a),l=function(){var e=null,t=function(t){return r()(null==e,"A history supports only one prompt at a time"),e=t,function(){e===t&&(e=null)}},n=function(t,n,a,l){if(null!=e){var o="function"==typeof e?e(t,n):e;"string"==typeof o?"function"==typeof a?a(o,l):(r()(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),l(!0)):l(!1!==o)}else l(!0)},a=[];return{setPrompt:t,confirmTransitionTo:n,appendListener:function(e){var t=!0,n=function(){t&&e.apply(void 0,arguments)};return a.push(n),function(){t=!1,a=a.filter(function(e){return e!==n})}},notifyListeners:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];a.forEach(function(e){return e.apply(void 0,t)})}}};t.a=l},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(1),i=n.n(o),u=n(3),s=n.n(u),c=n(0),d=n.n(c),f=n(2),h=n.n(f),m=n(8),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},b=function(e){return 0===d.a.Children.count(e)},g=function(e){function t(){var n,l,o;a(this,t);for(var i=arguments.length,u=Array(i),s=0;s<i;s++)u[s]=arguments[s];return n=l=r(this,e.call.apply(e,[this].concat(u))),l.state={match:l.computeMatch(l.props,l.context.router)},o=n,r(l,o)}return l(t,e),t.prototype.getChildContext=function(){return{router:p({},this.context.router,{route:{location:this.props.location||this.context.router.route.location,match:this.state.match}})}},t.prototype.computeMatch=function(e,t){var n=e.computedMatch,a=e.location,r=e.path,l=e.strict,o=e.exact,i=e.sensitive;if(n)return n;s()(t,"You should not use <Route> or withRouter() outside a <Router>");var u=t.route,c=(a||u.location).pathname;return r?Object(m.a)(c,{path:r,strict:l,exact:o,sensitive:i}):u.match},t.prototype.componentWillMount=function(){i()(!(this.props.component&&this.props.render),"You should not use <Route component> and <Route render> in the same route; <Route render> will be ignored"),i()(!(this.props.component&&this.props.children&&!b(this.props.children)),"You should not use <Route component> and <Route children> in the same route; <Route children> will be ignored"),i()(!(this.props.render&&this.props.children&&!b(this.props.children)),"You should not use <Route render> and <Route children> in the same route; <Route children> will be ignored")},t.prototype.componentWillReceiveProps=function(e,t){i()(!(e.location&&!this.props.location),'<Route> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),i()(!(!e.location&&this.props.location),'<Route> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.'),this.setState({match:this.computeMatch(e,t.router)})},t.prototype.render=function(){var e=this.state.match,t=this.props,n=t.children,a=t.component,r=t.render,l=this.context.router,o=l.history,i=l.route,u=l.staticContext,s=this.props.location||i.location,c={match:e,location:s,history:o,staticContext:u};return a?e?d.a.createElement(a,c):null:r?e?r(c):null:n?"function"==typeof n?n(c):b(n)?null:d.a.Children.only(n):null},t}(d.a.Component);g.propTypes={computedMatch:h.a.object,path:h.a.string,exact:h.a.bool,strict:h.a.bool,sensitive:h.a.bool,component:h.a.func,render:h.a.func,children:h.a.oneOfType([h.a.func,h.a.node]),location:h.a.object},g.contextTypes={router:h.a.shape({history:h.a.object.isRequired,route:h.a.object.isRequired,staticContext:h.a.object})},g.childContextTypes={router:h.a.object.isRequired},t.a=g},function(e,t,n){"use strict";var a=n(6);t.a=a.a},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(1),i=n.n(o),u=n(0),s=n.n(u),c=n(2),d=n.n(c),f=n(30),h=n.n(f),m=n(6),p=function(e){function t(){var n,l,o;a(this,t);for(var i=arguments.length,u=Array(i),s=0;s<i;s++)u[s]=arguments[s];return n=l=r(this,e.call.apply(e,[this].concat(u))),l.history=h()(l.props),o=n,r(l,o)}return l(t,e),t.prototype.componentWillMount=function(){i()(!this.props.history,"<MemoryRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { MemoryRouter as Router }`.")},t.prototype.render=function(){return s.a.createElement(m.a,{history:this.history,children:this.props.children})},t}(s.a.Component);p.propTypes={initialEntries:d.a.array,initialIndex:d.a.number,getUserConfirmation:d.a.func,keyLength:d.a.number,children:d.a.node},t.a=p},function(e,t,n){"use strict";function a(e){return"/"===e.charAt(0)}function r(e,t){for(var n=t,a=n+1,r=e.length;a<r;n+=1,a+=1)e[n]=e[a];e.pop()}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e&&e.split("/")||[],l=t&&t.split("/")||[],o=e&&a(e),i=t&&a(t),u=o||i;if(e&&a(e)?l=n:n.length&&(l.pop(),l=l.concat(n)),!l.length)return"/";var s=void 0;if(l.length){var c=l[l.length-1];s="."===c||".."===c||""===c}else s=!1;for(var d=0,f=l.length;f>=0;f--){var h=l[f];"."===h?r(l,f):".."===h?(r(l,f),d++):d&&(r(l,f),d--)}if(!u)for(;d--;d)l.unshift("..");!u||""===l[0]||l[0]&&a(l[0])||l.unshift("");var m=l.join("/");return s&&"/"!==m.substr(-1)&&(m+="/"),m}Object.defineProperty(t,"__esModule",{value:!0}),t.default=l},function(e,t,n){"use strict";function a(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(Array.isArray(e))return Array.isArray(t)&&e.length===t.length&&e.every(function(e,n){return a(e,t[n])});var n=void 0===e?"undefined":r(e);if(n!==(void 0===t?"undefined":r(t)))return!1;if("object"===n){var l=e.valueOf(),o=t.valueOf();if(l!==e||o!==t)return a(l,o);var i=Object.keys(e),u=Object.keys(t);return i.length===u.length&&i.every(function(n){return a(e[n],t[n])})}return!1}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=a},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(0),i=n.n(o),u=n(2),s=n.n(u),c=n(3),d=n.n(c),f=function(e){function t(){return a(this,t),r(this,e.apply(this,arguments))}return l(t,e),t.prototype.enable=function(e){this.unblock&&this.unblock(),this.unblock=this.context.router.history.block(e)},t.prototype.disable=function(){this.unblock&&(this.unblock(),this.unblock=null)},t.prototype.componentWillMount=function(){d()(this.context.router,"You should not use <Prompt> outside a <Router>"),this.props.when&&this.enable(this.props.message)},t.prototype.componentWillReceiveProps=function(e){e.when?this.props.when&&this.props.message===e.message||this.enable(e.message):this.disable()},t.prototype.componentWillUnmount=function(){this.disable()},t.prototype.render=function(){return null},t}(i.a.Component);f.propTypes={when:s.a.bool,message:s.a.oneOfType([s.a.func,s.a.string]).isRequired},f.defaultProps={when:!0},f.contextTypes={router:s.a.shape({history:s.a.shape({block:s.a.func.isRequired}).isRequired}).isRequired},t.a=f},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(0),i=n.n(o),u=n(2),s=n.n(u),c=n(1),d=n.n(c),f=n(3),h=n.n(f),m=n(31),p=function(e){function t(){return a(this,t),r(this,e.apply(this,arguments))}return l(t,e),t.prototype.isStatic=function(){return this.context.router&&this.context.router.staticContext},t.prototype.componentWillMount=function(){h()(this.context.router,"You should not use <Redirect> outside a <Router>"),this.isStatic()&&this.perform()},t.prototype.componentDidMount=function(){this.isStatic()||this.perform()},t.prototype.componentDidUpdate=function(e){var t=Object(m.a)(e.to),n=Object(m.a)(this.props.to);if(Object(m.b)(t,n))return void d()(!1,"You tried to redirect to the same route you're currently on: \""+n.pathname+n.search+'"');this.perform()},t.prototype.perform=function(){var e=this.context.router.history,t=this.props,n=t.push,a=t.to;n?e.push(a):e.replace(a)},t.prototype.render=function(){return null},t}(i.a.Component);p.propTypes={push:s.a.bool,from:s.a.string,to:s.a.oneOfType([s.a.string,s.a.object]).isRequired},p.defaultProps={push:!1},p.contextTypes={router:s.a.shape({history:s.a.shape({push:s.a.func.isRequired,replace:s.a.func.isRequired}).isRequired,staticContext:s.a.object}).isRequired},t.a=p},function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return r}),n.d(t,"e",function(){return l}),n.d(t,"c",function(){return o}),n.d(t,"g",function(){return i}),n.d(t,"h",function(){return u}),n.d(t,"f",function(){return s}),n.d(t,"d",function(){return c});var a=!("undefined"==typeof window||!window.document||!window.document.createElement),r=function(e,t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},l=function(e,t,n){return e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)},o=function(e,t){return t(window.confirm(e))},i=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history},u=function(){return-1===window.navigator.userAgent.indexOf("Trident")},s=function(){return-1===window.navigator.userAgent.indexOf("Firefox")},c=function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")}},function(e,t,n){"use strict";function a(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(1),u=n.n(i),s=n(3),c=n.n(s),d=n(0),f=n.n(d),h=n(2),m=n.n(h),p=n(4),b=(n.n(p),n(6)),g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},y=function(e){var t=e.pathname,n=void 0===t?"/":t,a=e.search,r=void 0===a?"":a,l=e.hash,o=void 0===l?"":l;return{pathname:n,search:"?"===r?"":r,hash:"#"===o?"":o}},w=function(e,t){return e?g({},t,{pathname:Object(p.addLeadingSlash)(e)+t.pathname}):t},E=function(e,t){if(!e)return t;var n=Object(p.addLeadingSlash)(e);return 0!==t.pathname.indexOf(n)?t:g({},t,{pathname:t.pathname.substr(n.length)})},v=function(e){return"string"==typeof e?Object(p.parsePath)(e):y(e)},k=function(e){return"string"==typeof e?e:Object(p.createPath)(e)},P=function(e){return function(){c()(!1,"You cannot %s with <StaticRouter>",e)}},x=function(){},O=function(e){function t(){var n,a,o;r(this,t);for(var i=arguments.length,u=Array(i),s=0;s<i;s++)u[s]=arguments[s];return n=a=l(this,e.call.apply(e,[this].concat(u))),a.createHref=function(e){return Object(p.addLeadingSlash)(a.props.basename+k(e))},a.handlePush=function(e){var t=a.props,n=t.basename,r=t.context;r.action="PUSH",r.location=w(n,v(e)),r.url=k(r.location)},a.handleReplace=function(e){var t=a.props,n=t.basename,r=t.context;r.action="REPLACE",r.location=w(n,v(e)),r.url=k(r.location)},a.handleListen=function(){return x},a.handleBlock=function(){return x},o=n,l(a,o)}return o(t,e),t.prototype.getChildContext=function(){return{router:{staticContext:this.props.context}}},t.prototype.componentWillMount=function(){u()(!this.props.history,"<StaticRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { StaticRouter as Router }`.")},t.prototype.render=function(){var e=this.props,t=e.basename,n=(e.context,e.location),r=a(e,["basename","context","location"]),l={createHref:this.createHref,action:"POP",location:E(t,v(n)),push:this.handlePush,replace:this.handleReplace,go:P("go"),goBack:P("goBack"),goForward:P("goForward"),listen:this.handleListen,block:this.handleBlock};return f.a.createElement(b.a,g({},r,{history:l}))},t}(f.a.Component);O.propTypes={basename:m.a.string,context:m.a.object.isRequired,location:m.a.oneOfType([m.a.string,m.a.object])},O.defaultProps={basename:"",location:"/"},O.childContextTypes={router:m.a.object.isRequired},t.a=O},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(0),i=n.n(o),u=n(2),s=n.n(u),c=n(1),d=n.n(c),f=n(3),h=n.n(f),m=n(8),p=function(e){function t(){return a(this,t),r(this,e.apply(this,arguments))}return l(t,e),t.prototype.componentWillMount=function(){h()(this.context.router,"You should not use <Switch> outside a <Router>")},t.prototype.componentWillReceiveProps=function(e){d()(!(e.location&&!this.props.location),'<Switch> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),d()(!(!e.location&&this.props.location),'<Switch> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.')},t.prototype.render=function(){var e=this.context.router.route,t=this.props.children,n=this.props.location||e.location,a=void 0,r=void 0;return i.a.Children.forEach(t,function(t){if(i.a.isValidElement(t)){var l=t.props,o=l.path,u=l.exact,s=l.strict,c=l.sensitive,d=l.from,f=o||d;null==a&&(r=t,a=f?Object(m.a)(n.pathname,{path:f,exact:u,strict:s,sensitive:c}):e.match)}}),a?i.a.cloneElement(r,{location:n,computedMatch:a}):null},t}(i.a.Component);p.contextTypes={router:s.a.shape({route:s.a.object.isRequired}).isRequired},p.propTypes={children:s.a.node,location:s.a.object},t.a=p},function(e,t,n){"use strict";function a(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}var r=n(0),l=n.n(r),o=n(2),i=n.n(o),u=n(36),s=n.n(u),c=n(12),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},f=function(e){var t=function(t){var n=t.wrappedComponentRef,r=a(t,["wrappedComponentRef"]);return l.a.createElement(c.a,{render:function(t){return l.a.createElement(e,d({},r,t,{ref:n}))}})};return t.displayName="withRouter("+(e.displayName||e.name)+")",t.WrappedComponent=e,t.propTypes={wrappedComponentRef:i.a.func},s()(t,e)};t.a=f},function(e,t,n){"use strict";t.__esModule=!0,t.canUseDOM=!("undefined"==typeof window||!window.document||!window.document.createElement),t.addEventListener=function(e,t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},t.removeEventListener=function(e,t,n){return e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)},t.getConfirmation=function(e,t){return t(window.confirm(e))},t.supportsHistory=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history},t.supportsPopStateOnHashChange=function(){return-1===window.navigator.userAgent.indexOf("Trident")},t.supportsGoWithoutReloadUsingHash=function(){return-1===window.navigator.userAgent.indexOf("Firefox")},t.isExtraneousPopstateEvent=function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")}},function(e,t,n){"use strict";function a(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),u=n.n(i),s=n(2),c=n.n(s),d=n(3),f=n.n(d),h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},m=function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)},p=function(e){function t(){var n,a,o;r(this,t);for(var i=arguments.length,u=Array(i),s=0;s<i;s++)u[s]=arguments[s];return n=a=l(this,e.call.apply(e,[this].concat(u))),a.handleClick=function(e){if(a.props.onClick&&a.props.onClick(e),!e.defaultPrevented&&0===e.button&&!a.props.target&&!m(e)){e.preventDefault();var t=a.context.router.history,n=a.props,r=n.replace,l=n.to;r?t.replace(l):t.push(l)}},o=n,l(a,o)}return o(t,e),t.prototype.render=function(){var e=this.props,t=(e.replace,e.to),n=e.innerRef,r=a(e,["replace","to","innerRef"]);f()(this.context.router,"You should not use <Link> outside a <Router>");var l=this.context.router.history.createHref("string"==typeof t?{pathname:t}:t);return u.a.createElement("a",h({},r,{onClick:this.handleClick,href:l,ref:n}))},t}(u.a.Component);p.propTypes={onClick:c.a.func,target:c.a.string,replace:c.a.bool,to:c.a.oneOfType([c.a.string,c.a.object]).isRequired,innerRef:c.a.oneOfType([c.a.string,c.a.func])},p.defaultProps={replace:!1},p.contextTypes={router:c.a.shape({history:c.a.shape({push:c.a.func.isRequired,replace:c.a.func.isRequired,createHref:c.a.func.isRequired}).isRequired}).isRequired},t.a=p},function(e,t,n){"use strict";var a=n(12);t.a=a.a},function(e,t,n){"use strict";n(27).config();var a=n(28),r=process.env.PORT||3001;a.listen(r,function(){console.log("CRA Server listening on port "+r+"!")})},function(e,t){e.exports=require("dotenv")},function(e,t,n){"use strict";function a(e,t){var n={},a=u.renderToNodeStream(i.createElement(r.StaticRouter,{location:e.url,context:n},i.createElement(c,null)));return n.url?void t.redirect(301,n.url):a}var r=n(29),l=n(37),o=n(38),i=n(0),u=n(39),s=n(40),c=s.default,d=o.resolve(__dirname,"client"),f=(0,l.createReactAppExpress)({clientBuildPath:d,universalRender:a});e.exports=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(14);n.d(t,"MemoryRouter",function(){return a.a});var r=n(17);n.d(t,"Prompt",function(){return r.a});var l=n(18);n.d(t,"Redirect",function(){return l.a});var o=n(12);n.d(t,"Route",function(){return o.a});var i=n(6);n.d(t,"Router",function(){return i.a});var u=n(20);n.d(t,"StaticRouter",function(){return u.a});var s=n(21);n.d(t,"Switch",function(){return s.a});var c=n(8);n.d(t,"matchPath",function(){return c.a});var d=n(22);n.d(t,"withRouter",function(){return d.a})},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=n(1),i=a(o),u=n(4),s=n(9),c=n(10),d=a(c),f=function(e,t,n){return Math.min(Math.max(e,t),n)},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.getUserConfirmation,n=e.initialEntries,a=void 0===n?["/"]:n,o=e.initialIndex,c=void 0===o?0:o,h=e.keyLength,m=void 0===h?6:h,p=(0,d.default)(),b=function(e){l(j,e),j.length=j.entries.length,p.notifyListeners(j.location,j.action)},g=function(){return Math.random().toString(36).substr(2,m)},y=f(c,0,a.length-1),w=a.map(function(e){return"string"==typeof e?(0,s.createLocation)(e,void 0,g()):(0,s.createLocation)(e,void 0,e.key||g())}),E=u.createPath,v=function(e,n){(0,i.default)(!("object"===(void 0===e?"undefined":r(e))&&void 0!==e.state&&void 0!==n),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var a=(0,s.createLocation)(e,n,g(),j.location);p.confirmTransitionTo(a,"PUSH",t,function(e){if(e){var t=j.index,n=t+1,r=j.entries.slice(0);r.length>n?r.splice(n,r.length-n,a):r.push(a),b({action:"PUSH",location:a,index:n,entries:r})}})},k=function(e,n){(0,i.default)(!("object"===(void 0===e?"undefined":r(e))&&void 0!==e.state&&void 0!==n),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var a=(0,s.createLocation)(e,n,g(),j.location);p.confirmTransitionTo(a,"REPLACE",t,function(e){e&&(j.entries[j.index]=a,b({action:"REPLACE",location:a}))})},P=function(e){var n=f(j.index+e,0,j.entries.length-1),a=j.entries[n];p.confirmTransitionTo(a,"POP",t,function(e){e?b({action:"POP",location:a,index:n}):b()})},x=function(){return P(-1)},O=function(){return P(1)},T=function(e){var t=j.index+e;return t>=0&&t<j.entries.length},S=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return p.setPrompt(e)},I=function(e){return p.appendListener(e)},j={length:w.length,action:"POP",location:w[y],index:y,entries:w,createHref:E,push:v,replace:k,go:P,goBack:x,goForward:O,canGo:T,block:S,listen:I};return j};t.default=h},function(e,t,n){"use strict";var a=(n(32),n(33),n(34),n(7));n.d(t,"a",function(){return a.a}),n.d(t,"b",function(){return a.b}),n(5)},function(e,t,n){"use strict";var a=n(1),r=(n.n(a),n(3));n.n(r),n(7),n(5),n(11),n(19),"function"==typeof Symbol&&Symbol.iterator,Object.assign},function(e,t,n){"use strict";var a=n(1),r=(n.n(a),n(3)),l=(n.n(r),n(7),n(5));n(11),n(19),Object.assign,l.f,l.a,l.a,l.a},function(e,t,n){"use strict";var a=n(1);n.n(a),n(5),n(7),n(11),"function"==typeof Symbol&&Symbol.iterator,Object.assign},function(e,t){e.exports=require("path-to-regexp")},function(e,t,n){"use strict";var a={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},l=Object.defineProperty,o=Object.getOwnPropertyNames,i=Object.getOwnPropertySymbols,u=Object.getOwnPropertyDescriptor,s=Object.getPrototypeOf,c=s&&s(Object);e.exports=function e(t,n,d){if("string"!=typeof n){if(c){var f=s(n);f&&f!==c&&e(t,f,d)}var h=o(n);i&&(h=h.concat(i(n)));for(var m=0;m<h.length;++m){var p=h[m];if(!(a[p]||r[p]||d&&d[p])){var b=u(n,p);try{l(t,p,b)}catch(e){}}}return t}return t}},function(e,t){e.exports=require("@cra-express/core")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("react-dom/server")},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(0),s=a(u);n(41);var c=n(42),d=a(c),f=n(43),h=a(f),m=n(44),p=a(m),b=n(45),g=a(b),y=n(46),w=a(y),E=n(47),v=a(E),k=n(50),P=a(k),x=n(51),O=a(x),T=n(52),S=a(T),I=n(53),j=a(I),C=n(54),_=a(C),R=n(55),A=function(e){function t(){return r(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),i(t,[{key:"render",value:function(){return s.default.createElement("div",null,s.default.createElement("nav",{className:"navbar navbar-inverse navbar-fixed-top"},s.default.createElement("div",{className:"navbar-header"},s.default.createElement(R.Link,{to:"/",className:"navbar-brand"},s.default.createElement("span",{className:"glyphicon glyphicon-home"}),s.default.createElement("b",null," Sakib's Blog"))),s.default.createElement("div",{className:"navbar-right"},s.default.createElement("a",{href:"https://knsakib.github.io",className:"navbar-brand"},s.default.createElement("span",{className:"glyphicon glyphicon-file"})," Resume"),s.default.createElement("a",{href:"https://github.com/knsakib?tab=repositories",className:"navbar-brand"},s.default.createElement("span",{className:"glyphicon glyphicon-list-alt"})," Github"),s.default.createElement("a",{href:"https://www.linkedin.com/in/knsakib/",className:"navbar-brand"},s.default.createElement("span",{className:"glyphicon glyphicon-paperclip"})," Linkedin"))),s.default.createElement("div",{className:"container-fluid"},s.default.createElement("div",{className:"jumbotron"},s.default.createElement("div",{class:"row"},s.default.createElement("div",{class:"col-sm-4 sidecol"},s.default.createElement("p",null," ",s.default.createElement(R.Link,{to:"/how-to-orchestrat-kube",className:"btn btn-default btn-lg"},"How to Orchestra the ",s.default.createElement("br",null),"Cloud with Kubernetes")," "),s.default.createElement("p",null," ",s.default.createElement(R.Link,{to:"/dockercheatsheet",className:"btn btn-default btn-lg"},"Docker Cheatsheet")," "),s.default.createElement("p",null," ",s.default.createElement(R.Link,{to:"/linuxcheatsheet",className:"btn btn-default btn-lg"},"Linux Cheatsheet")," "),s.default.createElement("p",null," ",s.default.createElement(R.Link,{to:"/gitcheatsheet",className:"btn btn-default btn-lg"},"GIT Cheatsheet")," "),s.default.createElement("p",null," ",s.default.createElement(R.Link,{to:"/gcpnetworking",className:"btn btn-default btn-lg"},"Google Cloud",s.default.createElement("br",null)," Networking")," "),s.default.createElement("p",null," ",s.default.createElement(R.Link,{to:"/performance",className:"btn btn-default btn-lg"},"Simple Performance Testing",s.default.createElement("br",null)," in Google Cloud")," "),s.default.createElement("p",null," ",s.default.createElement(R.Link,{to:"/deployappengine",className:"btn btn-default btn-lg"},"Deploy in App Engine",s.default.createElement("br",null)," from Eclipse ")," "),s.default.createElement("p",null," ",s.default.createElement(R.Link,{to:"/mongokube",className:"btn btn-default btn-lg"},"Mongo in Kubernetes",s.default.createElement("br",null)," with StatefulSets ")," "),s.default.createElement("p",null," ",s.default.createElement(R.Link,{to:"/network",className:"btn btn-default btn-lg"},"Networks",s.default.createElement("br",null)," in Google Cloud ")," "),s.default.createElement("p",null," ",s.default.createElement(R.Link,{to:"/puppet",className:"btn btn-default btn-lg"},"Puppet in",s.default.createElement("br",null)," Google Cloud ")," ")),s.default.createElement("div",{class:"col-sm-8"},s.default.createElement(R.Switch,null,s.default.createElement(R.Route,{path:"/how-to-orchestrat-kube",component:w.default}),s.default.createElement(R.Route,{path:"/",exact:!0,component:g.default}),s.default.createElement(R.Route,{path:"/dockercheatsheet",component:d.default}),s.default.createElement(R.Route,{path:"/linuxcheatsheet",component:h.default}),s.default.createElement(R.Route,{path:"/gitcheatsheet",component:p.default}),s.default.createElement(R.Route,{path:"/gcpnetworking",component:v.default}),s.default.createElement(R.Route,{path:"/performance",component:P.default}),s.default.createElement(R.Route,{path:"/deployappengine",component:O.default}),s.default.createElement(R.Route,{path:"/mongokube",component:S.default}),s.default.createElement(R.Route,{path:"/network",component:j.default}),s.default.createElement(R.Route,{path:"/puppet",component:_.default})))))))}}]),t}(u.Component);t.default=A},function(e,t){},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(0),u=function(e){return e&&e.__esModule?e:{default:e}}(i),s=function(e){function t(){var e,n,l,o;a(this,t);for(var i=arguments.length,u=Array(i),s=0;s<i;s++)u[s]=arguments[s];return n=l=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),l.componentWillMount=function(){},o=n,r(l,o)}return l(t,e),o(t,[{key:"render",value:function(){return u.default.createElement("div",null,u.default.createElement("h1",null,"Docker Cheatsheet"),u.default.createElement("p",null,"I use Docker day to day. So I decided to make a cheatsheet on Docker."),u.default.createElement("h3",null,"Stop, Eable and Start Docker"),u.default.createElement("code",null," ","sudo systemctl stop docker, sudo systemctl enable docker, sudo systemctl start docker"," "),u.default.createElement("h3",null,"List all the images")," ",u.default.createElement("code",null,"docker images -a"),u.default.createElement("h3",null,"Remove one specfic image "),u.default.createElement("code",null,"docker rmi imageID1 imageID2"),u.default.createElement("h3",null,"List all exited containers"),u.default.createElement("code",null,"docker ps -aq -f status=exited"),u.default.createElement("h3",null,"Remove stopped containers. This command will not remove running containers, only an error message will be printed out for each of them. Remove dangling/untagged images"),u.default.createElement("code",null,"docker ps -aq --no-trunc -f status=exited | xargs docker rm"),u.default.createElement("h3",null,"Remove dangling/untagged images"),u.default.createElement("code",null,"docker images -q --filter dangling=true | xargs docker rmi"),u.default.createElement("h3",null,"Remove containers created after a specific container"),u.default.createElement("code",null,"docker ps --since a1bz3768ez7g -q | xargs docker rm"),u.default.createElement("h3",null,"Remove containers created before a specific container"),u.default.createElement("code",null,"docker ps --before a1bz3768ez7g -q | xargs docker rm"),u.default.createElement("h3",null,"How to remove intermediary images during docker build"),u.default.createElement("code",null,"Use --rm together with docker build to remove intermediary images during the build process."),u.default.createElement("h3",null,"To get in to the Container"),u.default.createElement("code",null,"docker exec -it CONTAINER_NAME bash "),u.default.createElement("h3",null,"If I want to edit a file inside Container"),u.default.createElement("p",null,"First I copy the file in the docker hosted machine. "),u.default.createElement("code",null," docker cp CONTAINER_NAME:/path/to/file.ext . "),u.default.createElement("p",null," ","Then I edit the file locally using your favorite editor, and then copy back again to the container to replace the old file."," "),u.default.createElement("code",null," docker cp file.ext CONTAINER_NAME:/path/to/file.ext "))}}]),t}(i.Component);t.default=s},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(0),u=function(e){return e&&e.__esModule?e:{default:e}}(i),s=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),o(t,[{key:"render",value:function(){return u.default.createElement("div",null,u.default.createElement("h1",null,"Linux Cheatsheet"),u.default.createElement("p",null,"Linux commands are common in my workplace and I would like to use command line in dev environment. So I decided to make a cheatsheet on Docker."),u.default.createElement("h3",null,"To remove a directory that contains other files or directories, use the following command."),u.default.createElement("code",null," rm -r mydir"),u.default.createElement("h3",null,"If you don't want to receive a prompt for each file, during deletion"),u.default.createElement("code",null,"rm -rf mydir"),u.default.createElement("h3",null,"The ps command lists running processes."),u.default.createElement("code",null,"ps -A"),u.default.createElement("h3",null,"List process to scroll through them at chunk "),u.default.createElement("code",null,"ps -A | less"),u.default.createElement("h3",null,"The following command would search for the Firefox process"),u.default.createElement("code",null,"ps -A | grep firefox"),u.default.createElement("h3",null,"The kill command can kill a process, given its process ID."),u.default.createElement("code",null,"kill PID"),u.default.createElement("h3",null,"pgrep returns the process IDs that match it. For example, you could use the following command to find Firefox’s PID"),u.default.createElement("code",null,"pgrep firefox"),u.default.createElement("h3",null,"The pkill and killall commands can kill a process, given its name. We can Use either command to kill Firefox"),u.default.createElement("code",null,"pkill firefox ",u.default.createElement("br",null)," killall firefox"),u.default.createElement("h3",null,"How to remove intermediary images during docker build"),u.default.createElement("code",null,"Use --rm together with docker build to remove intermediary images during the build process."),u.default.createElement("h3",null,"How to change the pririty of a process"),u.default.createElement("code",null," renice 19 PID "),"The renice command changes the nice value of an already running process. The nice value determines what priority the process runs with. A value of -19 is very high priority, while a value of 19 is very low priority. A value of 0 is the default priority. The renice command requires a process’s PID. The following command makes a process run with very low priority:"," ",u.default.createElement("h3",null,"Kill any UI process"),u.default.createElement("code",null,"xkill command")," is a way of easily killing graphical programs. Run it and your cursor will turn into an x sign. Click a program’s window to kill that program. If you don’t want to kill a program, you can back out of xkill by right-clicking instead.")}}]),t}(i.Component);t.default=s},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(0),u=function(e){return e&&e.__esModule?e:{default:e}}(i),s=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),o(t,[{key:"render",value:function(){return u.default.createElement("div",null,u.default.createElement("h1",null,"GIT Cheatsheet"),u.default.createElement("p",null,"I must use Git for code push, pull and commit. So I decided to make a cheatsheet on Docker."),u.default.createElement("h4",null,"Configuring GitHub"),"We need to confiure both username and password as next step after installation",u.default.createElement("code",null,u.default.createElement("br",null),'git config --global user.name "user_name"',u.default.createElement("br",null),'git config --global user.email "email_id"',u.default.createElement("br",null)),u.default.createElement("h4",null,"Creating a local repository")," ",u.default.createElement("code",null,"git init myCodeFolder"),u.default.createElement("h4",null,"Adds the files in the local repository and stages them for commit"),u.default.createElement("code",null,"git add ."),u.default.createElement("h4",null,"Committing changes made to the index"),u.default.createElement("code",null,'git commit -m "some_message"'),u.default.createElement("h4",null,"Connect the remote repository to the local repository. First the remote repository should be created with the same name of the local repository"," "),u.default.createElement("code",null,"git remote add origin https://github.com/user_name/myCodeFolder.git"),u.default.createElement("h4",null,"Pushing files in local repository to GitHub repository"),u.default.createElement("code",null,"git push origin master"),u.default.createElement("h4",null,"To unstage a file"),u.default.createElement("code",null,"git reset HEAD FILE_NAME"),u.default.createElement("h4",null,"Merge development branch with master"),"These are first work with branch and after finish merge to master",u.default.createElement("code",null,u.default.createElement("br",null),"git branch development",u.default.createElement("br",null),"git add *",u.default.createElement("br",null),'git commit -m "My commit message"',u.default.createElement("br",null),"git push -u origin development ",u.default.createElement("br",null)),"Now I will merge all the changes on the development branch into the master",u.default.createElement("code",null,u.default.createElement("br",null)," git checkout master",u.default.createElement("br",null),"git merge development",u.default.createElement("br",null),"git push -u origin master",u.default.createElement("br",null)),u.default.createElement("h4",null,"To remove the commit(before push) and to modify the file "),u.default.createElement("code",null,"git reset --soft HEAD~1"),u.default.createElement("h4",null,"Setting your branch to exactly match the remote branch can be done in two steps"),u.default.createElement("code",null,"git fetch origin",u.default.createElement("br",null),"git reset --hard origin/master",u.default.createElement("br",null)),u.default.createElement("h4",null,"I you want to save my current branch's state other than master"),u.default.createElement("code",null,'git commit -a -m "Saving my work, just in case"',u.default.createElement("br",null),"git branch my-saved-work",u.default.createElement("br",null)),u.default.createElement("h4",null,"When to use git stash"),"When I have changes on the working copy, git pull will not work. This is mainly to stash the changes in a dirty working directory away. In other words, when I want to record the current state of the working directory and the index, but want to go back to a clean working directory.",u.default.createElement("code",null,"git stash"),u.default.createElement("h4",null,"When I want to pull the new changes to my local from the remote."," "),"This command incorporates changes from a remote repository into the current branch. It will pull changes from upstream branch. In its default mode, git pull is shorthand for",u.default.createElement("code",null,"git fetch")," followed by",u.default.createElement("code",null,"git merge FETCH_HEAD.")," ",u.default.createElement("code",null,"git pull //this will from the master "),"Pull before before making change in the local. Do not pull after making change, otherwise I will have conflicts",u.default.createElement("h4",null,"If I want to back to working copy from sstashed copy"),".",u.default.createElement("code",null,"git stash pop"),"This will apply stashed changes back to working copy unless there is conflicts. In the case of conflict, they will stay in stash.",u.default.createElement("h4",null,"To resolve conflict"),u.default.createElement("code",null,"git staus")," to show where is the conflicts. Resolve and commit.",u.default.createElement("h4",null,"There is another better way to merge development"),"merge master into the development first so that if there are any conflicts, it can be resolved in the development branch itself and master remains clean.",u.default.createElement("code",null,u.default.createElement("br",null),"git branch development",u.default.createElement("br",null),"git merge master (resolve any merge",u.default.createElement("br",null),"conflicts if there are any)",u.default.createElement("br",null),"git add *",u.default.createElement("br",null),'git commit -m "My commit message"',u.default.createElement("br",null),"git push -u origin development",u.default.createElement("br",null),"git checkout master",u.default.createElement("br",null),"git merge --no-ff development (there won't be any conflicts now)",u.default.createElement("br",null),"git push -u origin master",u.default.createElement("br",null)),u.default.createElement("br",null),"These steps are sometimes to leave master untouched until final stuff.",u.default.createElement("code",null," --no-ff development ")," to keep track of who did the merge and when. This is generally useful only when merging development into the master (last step), because I might need to merge master into development (first step) multiple times in my workflow, and creating a commit node for these might not be very useful.")}}]),t}(i.Component);t.default=s},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(0),u=function(e){return e&&e.__esModule?e:{default:e}}(i),s=function(e){function t(){var e,n,l,o;a(this,t);for(var i=arguments.length,u=Array(i),s=0;s<i;s++)u[s]=arguments[s];return n=l=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),l.componentWillMount=function(){},o=n,r(l,o)}return l(t,e),o(t,[{key:"render",value:function(){return u.default.createElement("div",null,u.default.createElement("h1",null,"How I automated the deployment pipeline for my rendered react docker daemon in Google Cloud Compute Engine"),u.default.createElement("h3",null,"Creating Compute Engine instance"),u.default.createElement("ol",null,u.default.createElement("li",null,"In the Google Cloud Developer console I went to Compute Engine in the left sliding pan and go to VM instances page."),u.default.createElement("li",null,"In the Boot disk section, I choose the Ubuntu 16.04 LTS amd64 xenial image."," "),u.default.createElement("li",null,"In the Machine type I selected small (1 shared vCPU) and Click Select."," "),u.default.createElement("li",null,"In the Firewall section, I selected Allow HTTP traffic and Allow HTTPS traffic."),u.default.createElement("li",null,"Finally I created the instance by clicking the Create button to create the instance.")),u.default.createElement("h3",null,"Installing Jenkins"),"I SSH into the instance and Run the following commands in the in the terminal,",u.default.createElement("code",null,u.default.createElement("br",null),"wget -q -O - https://pkg.jenkins.io/debian/jenkins.io.key | sudo apt-key add - ",u.default.createElement("br",null),"sudo sh -c 'echo deb http://pkg.jenkins.io/debian-stable binary/ > /etc/apt/sources.list.d/jenkins.list' ",u.default.createElement("br",null),"sudo apt-get update ",u.default.createElement("br",null),"sudo apt-get install jenkins ",u.default.createElement("br",null),"sudo systemctl start jenkins"),'To set up our installation, I visit Jenkins on its default port, 8080, using the server domain name or IP address: http://ip_address_or_domain_name:8080. We should see "Unlock Jenkins" screen, which displays the location of the initial password. In the terminal window, I used the cat command to display the password:',u.default.createElement("code",null,u.default.createElement("br",null),"sudo cat /var/lib/jenkins/secrets/initialAdminPassword",u.default.createElement("br",null)),'I copied the 32-character alphanumeric password from the terminal and pasted it into the "Administrator password" field, then clicked "Continue". The next screen presents the option of installing suggested plugins or selecting specific plugins. The default Jenkins server is NOT encrypted, so the data submitted with this form is not protected. So, I will continue as Admin and create an user later when I will setup SSL.',u.default.createElement("h3",null,"Installing Nginx and Map the Domain"),u.default.createElement("ol",null,u.default.createElement("li",null,"Run the following commands to install Nginx",u.default.createElement("code",null,u.default.createElement("br",null)," sudo apt-get update ",u.default.createElement("br",null),"sudo apt-get install nginx ",u.default.createElement("br",null))),u.default.createElement("li",null,"In the Google Cloud Console, I went to External IP section under VPC Network the Reserve a static address page in the GCP Console."," "),u.default.createElement("li",null,"I Changed the IP type from Ephemeral to Static and Choose a name"," "),u.default.createElement("li",null,"Click Reserve to reserve the IP."),u.default.createElement("li",null,"In the DNS settings Add the instance external IP as ‘A record’ and add ‘www’ as CNAME for the Domain"," "),u.default.createElement("li",null,"Open /etc/nginx/sites-available/default, with nano or your favorite text editor by the following command in the terminal, sudo nano /etc/nginx/sites-available/default"," "),u.default.createElement("li",null,"Find the existing server_name line and replace the underscore, _, with your domain name: . . . server_name example.com www.example.com; . . ."),u.default.createElement("li",null,"Save the file (Ctrl+x and then y) and quit your editor."),u.default.createElement("li",null," ","Reload Nginx to load the new configuration by sudo systemctl reload nginx")),u.default.createElement("h3",null,"Install Let’s encrypt SSL to serve on https"),u.default.createElement("ol",null,u.default.createElement("li",null,"From Let’s Encrypt Documentation(https://certbot.eff.org/#ubuntuxenial-nginx) we can see what are the commands we need to run"),u.default.createElement("li",null,"I ran the following command",u.default.createElement("code",null,u.default.createElement("br",null),"sudo apt-get update",u.default.createElement("br",null),"sudo apt-get install software-properties-common",u.default.createElement("br",null),"sudo add-apt-repository ppa:certbot/certbot",u.default.createElement("br",null),"sudo apt-get update",u.default.createElement("br",null),"sudo apt-get install python-certbot-nginx",u.default.createElement("br",null),'sudo certbot --authenticator standalone --installer nginx -d knsakib.com -d www.knsakib.com --pre-hook "service nginx stop" --post-hook "service nginx start"',u.default.createElement("br",null),"sudo certbot renew --dry-run"))),u.default.createElement("h3",null,"Change the server block in Nginx to serve Jenkins under /jenkins path"," "),u.default.createElement("ol",null,u.default.createElement("li",null,"I Opened ",u.default.createElement("code",null," /etc/nginx/sites-available/default "),", again with nano or your favorite text editor"," "),u.default.createElement("li",null,"First, I added specific access and error logs in the server block with the SSL configuration settings,",u.default.createElement("code",null,u.default.createElement("br",null),"server /","{",u.default.createElement("br",null),"...",u.default.createElement("br",null),"access_log /var/log/nginx/jenkins.access.log;",u.default.createElement("br",null),"error_log /var/log/nginx/jenkins.error.log;",u.default.createElement("br",null),"...",u.default.createElement("br",null),"}")),u.default.createElement("li",null,"Add a location in the default server block as follows,",u.default.createElement("code",null,u.default.createElement("br",null),"location ^~ /jenkins ","{",u.default.createElement("br",null),"proxy_pass http://127.0.0.1:8080;",u.default.createElement("br",null),"include /etc/nginx/proxy_params;",u.default.createElement("br",null),"proxy_read_timeout 90;",u.default.createElement("br",null)," proxy_redirect http://127.0.0.1:8080 https://knsakib.com/jenkins;",u.default.createElement("br",null),"}"," ",u.default.createElement("br",null))),u.default.createElement("li",null,"We can check the syntax if it is ok by sudo nginx -t In addition, we must ensure that Jenkins is configured to listen for requests to the /jenkins path. For that I added the parameter --prefix=/jenkins to the Jenkins default startup configuration file which is /etc/default/jenkins. We will modify the /etc/default/jenkins configuration file to make these adjustments, Locate the JENKINS_ARGS line and add ",u.default.createElement("code",null,"--prefix=/jenkins")," to the existing arguments:",u.default.createElement("code",null,u.default.createElement("br",null),". . .",u.default.createElement("br",null),'JENKINS_ARGS="--webroot=/var/cache/$NAME/war --httpPort=$HTTP_PORT --prefix=/jenkins" ',u.default.createElement("br",null)," ")),u.default.createElement("li",null,"To use the new configuration settings, we'll restart Jenkins and Nginx.",u.default.createElement("code",null,u.default.createElement("br",null)," $sudo systemctl restart jenkins"),u.default.createElement("code",null,u.default.createElement("br",null)," $sudo systemctl restart nginx ",u.default.createElement("br",null)," "),"If there is any issue to restart we can check the status by"," ",u.default.createElement("code",null,"sudo systemctl status nginx")),u.default.createElement("li",null,"For Jenkins to work with Nginx, we need to update the Jenkins configuration so that the Jenkins server listens only on the localhost interface rather than all interfaces (0.0.0.0). If Jenkins listens on all interfaces, then it's potentially accessible on its original, unencrypted port (8080). We will modify the /etc/default/jenkins configuration file to make these adjustments.",u.default.createElement("code",null," ",u.default.createElement("br",null),"sudo nano /etc/default/jenkins"," "),"Locate the JENKINS_ARGS line and add --httpListenAddress=127.0.0.1 to the existing arguments:",u.default.createElement("code",null,u.default.createElement("br",null),". . .",u.default.createElement("br",null),'JENKINS_ARGS="--webroot=/var/cache/$NAME/war --httpPort=$HTTP_PORT --httpListenAddress=127.0.0.1" ',u.default.createElement("br",null))),u.default.createElement("li",null,"Save and exit the file. To use the new configuration settings, we'll restart Jenkins and Nginx.",u.default.createElement("code",null," ",u.default.createElement("br",null),"sudo systemctl restart jenkins",u.default.createElement("br",null)," "))),u.default.createElement("h3",null,"Create a New Admin User"),u.default.createElement("ol",null,u.default.createElement("li",null,"Enable Sign UP new user by changing the file /var/lib/jenkins/config.xml",u.default.createElement("code",null," ",u.default.createElement("br",null),"sudo nano /var/lib/jenkins/config.xml ",u.default.createElement("br",null)),"Set ",u.default.createElement("disableSignup",null,"true")," to"," ",u.default.createElement("disableSignup",null,"false"),u.default.createElement("code",null," ",u.default.createElement("br",null)," sudo systemctl restart jenkins ",u.default.createElement("br",null)," ")," "),u.default.createElement("li",null,"Sign Up new user"),u.default.createElement("li",null,"Change the /var/lib/jenkins/config.xml file again and set"," ",u.default.createElement("disableSignup",null,"true")," again",u.default.createElement("code",null," ",u.default.createElement("br",null),"sudo systemctl restart jenkins ",u.default.createElement("br",null)," "))),u.default.createElement("h3",null,"Install Docker "),u.default.createElement("ol",null,u.default.createElement("li",null,"First, add the GPG key for the official Docker repository to the system: curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -"),u.default.createElement("li",null,"Add the Docker repository to APT sources:",u.default.createElement("code",null," ",u.default.createElement("br",null),'sudo add-apt-repository "deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable"')),u.default.createElement("li",null," ","Next, update the package database with the Docker packages from the newly added repo:",u.default.createElement("code",null," ",u.default.createElement("br",null),"sudo apt-get update"," ")),u.default.createElement("li",null,"If you want to avoid typing sudo whenever you run the docker command, add your username to the docker group:",u.default.createElement("code",null,u.default.createElement("br",null)," sudo usermod -aG docker $","{","USER","}"," ")),u.default.createElement("li",null,"After following the prerequisites, both Jenkins and Docker are installed on your server. However, by default, the Linux user responsible for running the Jenkins process cannot access Docker. To fix this, we need to add the jenkins user to the docker group using the usermod command:",u.default.createElement("code",null,u.default.createElement("br",null),"sudo usermod -aG docker jenkins",u.default.createElement("br",null)," sudo systemctl restart jenkins ",u.default.createElement("br",null)," "))),u.default.createElement("h3",null,"Redirecting direct access to site from server's IP "),u.default.createElement("ol",null,u.default.createElement("li",null,"For this I created a new site that responds to the IP and responds with a 301 redirect. To create a site just go to your Nginx's installation /sites-availabledirectory. This directory is commonly located at /etc/nginx/sites-available, run in your terminal:",u.default.createElement("code",null,u.default.createElement("br",null),"cd /etc/nginx/sites-available",u.default.createElement("br",null))),u.default.createElement("li",null,"Once in the directory create a new server config file or edit one of the server files that you have there. For this example let's create a new one and add the server block there, I'll use nano to edit the file, run in your terminal:",u.default.createElement("code",null,u.default.createElement("br",null),"touch empty_site",u.default.createElement("br",null),"nano empty_site ",u.default.createElement("br",null))),u.default.createElement("li",null,"Add this server block, make sure to replace server_ip with your server's IP.",u.default.createElement("code",null,u.default.createElement("br",null),"server ","{",u.default.createElement("br",null)," listen 80;",u.default.createElement("br",null)," listen 443; # add this to block HTTPS access",u.default.createElement("br",null)," server_name my_server_ip_adress https://my_server_ip_adress;",u.default.createElement("br",null)," return 301 https://knsakib.com;",u.default.createElement("br",null),"}"," ",u.default.createElement("br",null))),u.default.createElement("li",null,"Save and exit the file."),u.default.createElement("li",null,"Now we just have to enabled the site and restart the Nginx server. To enable the site lets navigate to the /sites-enabled directory inside the Nginx config and create a symlink for the server config file that we previously created, run in your terminal:",u.default.createElement("code",null,u.default.createElement("br",null),"cd /etc/nginx/sites-enabled",u.default.createElement("br",null),"ln -s /etc/nginx/sites-available/empty_site empty_site")),u.default.createElement("li",null,"Once this is done, we just have to restart the nginx server and everything should be working as expected, to restart run this:",u.default.createElement("code",null,u.default.createElement("br",null),"sudo service nginx restart ",u.default.createElement("br",null)," "))),u.default.createElement("h3",null,"Rendering my react site 'cause it's a Blog and it needs SEO"),u.default.createElement("ol",null,u.default.createElement("li",null,"I used"," ",u.default.createElement("a",{href:"https://github.com/antonybudianto/cra-universal"},"cra-universal")," ","cra-universal to rendered my create-react-app blog. It uses express server render the static react app. It biulds the react site and biuld the rendered site together. It is an amazing tool, thanks to it's author. All the intruction are mentioned at author's"," ",u.default.createElement("a",{href:"https://github.com/antonybudianto/cra-universal"},"github")," ","page."),u.default.createElement("li",null,"Because I am using react router, I made sure that App.js didn't render BrowserRouter, but put it on src/index.js or outer files The index.js code is"," ",u.default.createElement("a",{href:"https://github.com/knsakib/jenkins-react-blog/blob/master/src/index.js"},"here"),". And the App.js is"," ",u.default.createElement("a",{href:"https://github.com/knsakib/jenkins-react-blog/blob/master/src/App.js"},"here"),"."),u.default.createElement("li",null,"I also linked bootstarp cdn style sheet in index.html in stead of using any bootstrap npm module to make sure that the css will not create any issue with rendering.")),u.default.createElement("h3",null,"Creating Dockerfile"),u.default.createElement("ol",null,u.default.createElement("li",null,"I created the docker file in my project directory, and add the image I want to inherit from, and override the log level setting. It includes all the module installation command and cra-universal build commands that include both the react build and server biuld command."),u.default.createElement("li",null,"I can just run ",u.default.createElement("code",null,"npm install")," in my Dockerfile to install dependencies and copied from the build host, However, if I do that, there’s no reason to copy the full node_modules directory over at all. That’s where a .dockerignore file comes in. This lets me filter which files the Docker CLI sends to the Docker daemon, which is great for our efficiency!"),u.default.createElement("li",null,"Also note that create-react-app will generate a non-shrinkwrappable dependency tree, so I cleaned it up first. and used a --dev shrinkwrap.",u.default.createElement("code",null,u.default.createElement("br",null),"npm prune",u.default.createElement("br",null),"npm dedupe",u.default.createElement("br",null),"npm install",u.default.createElement("br",null),"npm shrinkwrap --dev",u.default.createElement("br",null)),"There is a good explanation of these steps mentioned"," ",u.default.createElement("a",{href:"https://medium.com/ai2-blog/dockerizing-a-react-application-3563688a2378"},"here"),"for building a dockerized production build react app.",u.default.createElement("li",null,"Finally my Dockerfile looks like"," ",u.default.createElement("a",{href:"https://github.com/knsakib/jenkins-react-blog/blob/master/Dockerfile"},"this"),"."))),u.default.createElement("h3",null,"Creating Automatic build pipeline in jenkins"),'With the help of steps described in "Install Docker" section above and some of the default plugins we enabled during installation, Jenkins can now use Docker to run build and test tasks. Now I want Jenkins to build and run my docker image as soon I push code to my github repository.',u.default.createElement("ol",null,u.default.createElement("li",null,"In order for Jenkins to triger the build I need it to watch my GitHub projects. For this I created a Personal Access Token in our GitHub account. I clicked on my user icon in the upper-right hand corner and select Settings from the drop down menu."),u.default.createElement("li",null,"I locate the Developer settings section of the left-hand menu and clicked Personal access tokens."),u.default.createElement("li",null,"Then I clicked on Generate new token button"),u.default.createElement("li",null,"In the Token description box, I added a description"),u.default.createElement("li",null,"In the Select scopes section, I checked the repo:status, repo:public_repo and admin:org_hook boxes. These will allow Jenkins to update commit statuses and to create webhooks for the project. If I used a private repository, I would need to select the general repo permission instead of the repo subitems."),u.default.createElement("li",null,"Then I clicked Generate token at the bottom."),u.default.createElement("li",null,"My new token was displayed and copied the token. Please note that as the message indicates on that page, there is no way to retrieve the token once you leave this page."),u.default.createElement("li",null,"From my Jenkins web interface in the the main dashboard, I clicked Credentials in the left hand menu."),u.default.createElement("li",null,"On the next page, I clicked the arrow next to (global) within the Jenkins scope. In the box that appears, I clicked Add credentials"),u.default.createElement("li",null,"Under the Kind drop down menu, I selected Secret text. In the Secret field, I pasted my GitHub personal access token. Filled out the Description field. I left the Scope as Global and the ID field blank"),u.default.createElement("li",null,"Clicked the OK button to finish"),u.default.createElement("li",null,"In the main Jenkins dashboard, I clicked Manage Jenkins in the left hand menu and in the list of links on the following page, I clicked Configure System."),u.default.createElement("li",null,"In the the GitHub section of that page, I clicked the Add GitHub Server button and then select GitHub Server:"),u.default.createElement("li",null,"The section will expand to prompt for some additional information. In the Credentials drop down menu, I selected my GitHub personal access token that I added in the steps above"),u.default.createElement("li",null,"I Tested connection so that Jenkins can make a test API call to my account and verify connectivity. Lastly I clicked the Save button to implement your changes"),u.default.createElement("li",null,"I created the Jenkinsfile which is not too much complicated. It just conatins different stages from cloning the repo to build and run the docker image. Jenkin is running this deamon as a node."),u.default.createElement("li",null,"Now in the main Jenkins dashboard, I clicked New Item in the left hand menu."),u.default.createElement("li",null,"I named the new pipeline and select Pipeline as the item type."),u.default.createElement("li",null,"Click the OK and on the next screen, checked the GitHub project box. In the Project url field that appears, I pasted my project's GitHub repository URL."),u.default.createElement("li",null,"Next, in the Build Triggers section, I checked the GitHub hook trigger for GITScm polling box. In the Pipeline section, I need to tell Jenkins to run the pipeline defined in the Jenkinsfile in our repository. I changed the Definition type to Pipeline script from SCM."),u.default.createElement("li",null,"In the new section that appears, I chose Git in the SCM menu. In the Repository URL field that appears, I entered the URL of the repository again."),u.default.createElement("li",null,"If the project is a private Repository, I will use the add credentials button to add additional access to the repository. I can add a personal access token as I did with the hooks configuration earlier. When I am finished, I clicked the Save button at the bottom of the page."),u.default.createElement("li",null,"In order to trigger Jenkins to set up the appropriate hooks, we need to perform a manual build the first time. In pipeline's main page, I clicked Build Now in the left hand menu."),u.default.createElement("li",null,"A new build will be scheduled. In the Build History box in the lower left corner, a new build should appear in a moment. Additionally, a Stage View will begin to be drawn in the main area of the interface. This will track the progress of your testing run as the different stages are completed."),u.default.createElement("li",null,"In the Build History box, click on the number associated with the build to go to the build detail page. From here, you can click the Console Output button in the left hand menu to see details of the steps that were run."),u.default.createElement("li",null,"I Clicked 'Back to Project' in the left hand menu when finished in order to return to the main pipeline view. Now that we've built the project once, we can have Jenkins create the webhooks for our project. Click Configure in the left hand menu of the pipeline."),u.default.createElement("li",null,"No changes are necessary on this screen, just click the Save button at the bottom. Now that the Jenkins has information about the project from the initial build process, it will register a webhook with our GitHub project when I saves the page."),u.default.createElement("li",null,"We can verify this by going to your GitHub repository and clicking the Settings button. "),u.default.createElement("li",null,"On the next page, if we click Webhooks from the side menu. You should see your Jenkins server webhook in the main interface. Now, when you push new changes to your repository, Jenkins will be notified. It will then pull the new code and retest it using the same procedure.")),"These steps are very well defined with graphical representation in this",u.default.createElement("a",{href:"https://www.digitalocean.com/community/tutorials/how-to-set-up-continuous-integration-pipelines-in-jenkins-on-ubuntu-16-04"}," Digital Ocean Tutorial."),u.default.createElement("h3",null,"Maintenance"),"As I am using bare-bone instance to run my Docker, I may need to sometimes remove the previous Docker image to clear up my memory. To do this, we need to run",u.default.createElement("code",null,u.default.createElement("br",null),"docker volume ls -qf dangling=true | xargs -r docker volume rm",u.default.createElement("br",null)),"There is a good ",u.default.createElement("a",{herf:"https://lebkowski.name/docker-volumes/"},"doc")," expaining how to claim volume for different docker version. I can include this command in Jenkinsfile to automate this process But I just want make the process resource intensive or to take more time. So, I will run this command once in a while in the instance to clean up the memory.")}}]),t}(i.Component);t.default=s},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(0),u=function(e){return e&&e.__esModule?e:{default:e}}(i),s=function(e){function t(){var e,n,l,o;a(this,t);for(var i=arguments.length,u=Array(i),s=0;s<i;s++)u[s]=arguments[s];return n=l=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),l.componentWillMount=function(){},o=n,r(l,o)}return l(t,e),o(t,[{key:"render",value:function(){return u.default.createElement("div",null,u.default.createElement("h1",null,"How to Orchestrat the Cloud with Kubernetes"),u.default.createElement("h3",null,"Clone the GitHub repository"),u.default.createElement("code",null,"git clone https://github.com/googlecodelabs/orchestrate-with-kubernetes.git",u.default.createElement("br",null),"cd orchestrate-with-kubernetes/kubernetes",u.default.createElement("br",null)),u.default.createElement("h3",null,"Running Nginx deployment"),"The easiest way to get started with Kubernetes is to use the kubectl run command. We will Use it to launch a single instance of the nginx container:",u.default.createElement("code",null,u.default.createElement("br",null),"kubectl run nginx --image=nginx:1.10.0 ",u.default.createElement("br",null)),"Kubernetes has created a deployment. Deployments keep the pods up and running even when the nodes they run on fail. In Kubernetes, all containers run in a pod. Use the kubectl get pods command to view the running nginx container:",u.default.createElement("code",null,u.default.createElement("br",null),"kubectl get pods",u.default.createElement("br",null)),"Once the nginx container is running we can expose it outside of Kubernetes using the kubectl expose command:",u.default.createElement("code",null,u.default.createElement("br",null),"kubectl expose deployment nginx --port 80 --type LoadBalancer",u.default.createElement("br",null)),"What happened is that behind the scenes Kubernetes created an external Load Balancer with a public IP address attached to it. Any client who hits that public IP address will be routed to the pods behind the service. In this case that would be the nginx pod. If we list our services now using the kubectl get services command...",u.default.createElement("code",null,u.default.createElement("br",null),"kubectl get services",u.default.createElement("br",null)),"It may take a few seconds before the ExternalIP field is populated for our service. This is normal -- just re-run the kubectl get services command every few seconds until the field populates. Use the External IP to hit the nginx container remotely using the curl http command.",u.default.createElement("code",null,u.default.createElement("br",null),"curl http://","<","External IP",">",":80"," "," ",u.default.createElement("br",null)),"And there you go! Kubernetes supports an easy to use workflow out of the box using the kubectl run and expose commands. Now that you've seen a quick tour of kubernetes, it's time to dive into each of the components and abstractions.",u.default.createElement("h3",null,"Pods"),"At the core of Kubernetes is the Pod. Pods represent and hold a collection of one or more containers. Generally, if you have multiple containers with a hard dependency on each other, the containers would be packaged inside of a single pod. Pods also have Volumes. Volumes are data disks that live as long as the pods live, and can be used by the containers in that pod. Pods provide a shared namespace for their contents which means that the two containers inside of our example pod can communicate with each other, and they also share the attached volumes. Pods also share a network namespace. This means that there is one IP Address per pod. Now let's take a deeper dive into pods.",u.default.createElement("h3",null,"Creating Pods"),"Pods can be created using pod configuration files. Let's take a moment to explore the monolith pod configuration file. Run to following: cat pods/monolith.yaml The output shows the ",u.default.createElement("a",{href:"https://github.com/googlecodelabs/orchestrate-with-kubernetes/blob/master/kubernetes/pods/monolith.yaml"},"open configuration file."),"There's a few things to notice here. You'll see that: our pod is made up of one container (the monolith). we're passing a few arguments to our container when it starts up. we're opening up port 80 for http traffic. Create the monolith pod using kubectl:",u.default.createElement("code",null,u.default.createElement("br",null),"kubectl create -f pods/monolith.yaml",u.default.createElement("br",null)),"Let's examine our pods. Use the kubectl get pods command to list all pods running in the default namespace.",u.default.createElement("code",null,u.default.createElement("br",null),"kubectl get pods",u.default.createElement("br",null)),"It may take a few seconds before the monolith pod is up and running. The monolith container image needs to be pulled from the Docker Hub before we can run it. Once the pod is running, use the kubectl describe command to get more information about the monolith pod.",u.default.createElement("code",null,u.default.createElement("br",null),"kubectl describe pods monolith",u.default.createElement("br",null)),"You'll see a lot of the information about the monolith pod including the Pod IP address and the event log. This information will come in handy when troubleshooting. Kubernetes makes it easy to create pods by describing them in configuration files and view information about them when they are running. At this point you have the ability create all the pods your deployment requires!",u.default.createElement("h3",null,"Interacting with Pods"),"Pods are allocated a private IP address by default and cannot be reached outside of the cluster. Use the kubectl port-forward command to map a local port to a port inside the monolith pod. From this point on the lab will ask you to work in multiple cloud shell tabs. Any commands that are executed in a second or third command shell will be denoted in the command's instructions. Open two Cloud Shell terminals. One to run the kubectl port-forward command, and the other to issue curl commands. In the 2nd terminal, run this command to set up port-forwarding:",u.default.createElement("code",null,u.default.createElement("br",null),"kubectl port-forward monolith 10080:80"),u.default.createElement("br",null),"Now in the 1st terminal we can start talking to our pod using curl:",u.default.createElement("code",null,u.default.createElement("br",null),"curl http://127.0.0.1:10080"),u.default.createElement("br",null),'Yes! We got a very friendly "hello" back from our container. Now use the curl command to see what happens when we hit a secure endpoint:',u.default.createElement("code",null,u.default.createElement("br",null),"curl http://127.0.0.1:10080/secure"),u.default.createElement("br",null),"Uh oh. Let's try logging in to get an auth token back from our Monolith:",u.default.createElement("code",null,u.default.createElement("br",null),"curl -u user http://127.0.0.1:10080/login"),u.default.createElement("br",null),'At the login prompt, use the super-secret password "password" to login. Logging in caused a JWT token to print out',u.default.createElement("code",null,u.default.createElement("br",null),"TOKEN=$(curl http://127.0.0.1:10080/login -u user|jq -r '.token')"),u.default.createElement("br",null),"Copy the token and use it to hit our secure endpoint with curl:",u.default.createElement("code",null,u.default.createElement("br",null),'curl -H "Authorization: Bearer $TOKEN" http://127.0.0.1:10080/secure'),u.default.createElement("br",null),"Note: Cloud shell doesn't handle copying long strings well, so we copied the token into an environment variable for use in the previous step. At this point we should get a response back from our application, letting us know everything is right in the world again. Use the kubectl logs command to view the logs for the monolith Pod.",u.default.createElement("code",null,u.default.createElement("br",null),"kubectl logs monolith"),u.default.createElement("br",null),"Open a 3rd terminal and use the -f flag to get a stream of the logs happening in real-time:",u.default.createElement("code",null,u.default.createElement("br",null),"kubectl logs -f monolith"),u.default.createElement("br",null),"Now if you use curl to interact with the monolith, you can see the logs updating (in terminal 3):",u.default.createElement("code",null,u.default.createElement("br",null),"curl http://127.0.0.1:10080"),u.default.createElement("br",null),"Use the kubectl exec command to run an interactive shell inside the Monolith Pod. This can come in handy when you want to troubleshoot from within a container:",u.default.createElement("code",null,u.default.createElement("br",null),"kubectl exec monolith --stdin --tty -c monolith /bin/sh"),u.default.createElement("br",null),"For example, once we have a shell into the monolith container we can test external connectivity using the ping command:",u.default.createElement("code",null,u.default.createElement("br",null),"# ping -c 3 google.com"),u.default.createElement("br",null),"Be sure to log out when you're done with this interactive shell.",u.default.createElement("code",null,u.default.createElement("br",null),"# exit",u.default.createElement("br",null)),"As you can see, interacting with pods is as easy as using the kubectl command. If you need to hit a container remotely or get a login shell, Kubernetes provides everything you need to get up and going.",u.default.createElement("h3",null,"Services"),"Pods aren't meant to be persistent. They can be stopped or started for many reasons - like failed liveness or readiness checks - and this leads to a problem: What happens if we want to communicate with a set of Pods? When they get restarted they might have a different IP address. That's where Services come in. Services provide stable endpoints for Pods. Services use labels to determine what Pods they operate on. If Pods have the correct labels, they are automatically picked up and exposed by our services. The level of access a service provides to a set of pods depends on the Service's type. Currently there are three types:",u.default.createElement("li",null,"ClusterIP (internal) -- the default type means that this Service is only visible inside of the cluster,"),u.default.createElement("li",null,"NodePort gives each node in the cluster an externally accessible IP and"),u.default.createElement("li",null,"LoadBalancer adds a load balancer from the cloud provider which forwards traffic from the service to Nodes within it."),"Two things are importan to understnad",u.default.createElement("li",null,"Create a service"),u.default.createElement("li",null,"Use label selectors to expose a limited set of Pods externally"),u.default.createElement("h3",null,"Creating a Service"),"Before we can create our services -- let's first create a secure pod that can handle https traffic If you've changed directories, make sure you return to the ",u.default.createElement("code",null,"~/orchestrate-with-kubernetes/kubernetes")," directory:",u.default.createElement("code",null,u.default.createElement("br",null),"cd ~/orchestrate-with-kubernetes/kubernetes",u.default.createElement("br",null)),"Explore the monolith service configuration file:",u.default.createElement("code",null,u.default.createElement("br",null),"cat pods/secure-monolith.yaml",u.default.createElement("br",null)),"Create the secure-monolith pods and their configuration data:",u.default.createElement("code",null,u.default.createElement("br",null),"kubectl create secret generic tls-certs --from-file tls/",u.default.createElement("br",null),"kubectl create configmap nginx-proxy-conf --from-file nginx/proxy.conf",u.default.createElement("br",null),"kubectl create -f pods/secure-monolith.yaml",u.default.createElement("br",null)),"Now that we have a secure pod, it's time to expose the secure-monolith Pod externally.To do that we'll create a Kubernetes service. Explore the monolith service configuration file:",u.default.createElement("code",null,u.default.createElement("br",null),"cat services/",u.default.createElement("a",{href:"https://github.com/googlecodelabs/orchestrate-with-kubernetes/blob/master/kubernetes/services/monolith.yaml"},"monolith.yaml"),u.default.createElement("br",null)),"Things to note:",u.default.createElement("li",null,'There\'s a selector which is used to automatically find and expose any pods with the labels "app=monolith" and "secure=enabled"'),u.default.createElement("li",null,"Now you have to expose the nodeport here because this is how we'll forward external traffic from port 31000 to nginx (on port 443)."),"Use the kubectl create command to create the monolith service from the monolith service configuration file:",u.default.createElement("code",null,u.default.createElement("br",null),"kubectl create -f services/monolith.yaml",u.default.createElement("br",null)),"You have exposed your service on an external port on all nodes in your cluster. If you want to expose this service to the external internet, you may need to set up firewall rules for the service port(s) (tcp:31000) to serve traffic. See http://releases.k8s.io/release-1.2/docs/user-guide/services-firewalls.md for more details. service \"monolith\" created This output is saying you're using a port to expose the service. This means that it's possible to have port collisions if another app tries to bind to port 31000 on one of your servers. Normally, Kubernetes would handle this port assignment. In this lab you chose a port so that it's easier to configure health checks later on. Use the gcloud compute firewall-rules command to allow traffic to the monolith service on the exposed nodeport:",u.default.createElement("code",null,u.default.createElement("br",null),"gcloud compute firewall-rules create allow-monolith-nodeport \\",u.default.createElement("br",null),"--allow=tcp:31000",u.default.createElement("br",null)),"Now that everything is setup you should be able to hit the secure-monolith service from outside the cluster without using port forwarding. First, get an IP address for one of the nodes, then try hitting the secure-monolith service using curl:",u.default.createElement("code",null,u.default.createElement("br",null),"gcloud compute instances list",u.default.createElement("br",null),"curl -k https://","<","EXTERNAL_IP",">",":31000",u.default.createElement("br",null)),"Uh oh! That timed out. What's going wrong? It's time for a quick knowledge check.Use the following commands to answer the questions below. kubectl get services monolithkubectl describe services monolith",u.default.createElement("h3",null,"Questions:"),u.default.createElement("li",null,"Why are you unable to get a response from the monolith service?"),u.default.createElement("li",null,"How many endpoints does the monolith service have?"),u.default.createElement("li",null,"What labels must a Pod have to be picked up by the monolith service?"),u.default.createElement("h3",null,"Adding Labels to Pods"),"Currently the monolith service does not have endpoints. One way to troubleshoot an issue like this is to use the kubectl get pods command with a label query. We can see that we have quite a few pods running with the monolith label.",u.default.createElement("code",null,u.default.createElement("br",null),'kubectl get pods -l "app=monolith"',u.default.createElement("br",null)),'But what about "app=monolith" and "secure=enabled"?',u.default.createElement("code",null,u.default.createElement("br",null),'kubectl get pods -l "app=monolith,secure=enabled"',u.default.createElement("br",null)),'Notice this label query does not print any results. It seems like we need to add the "secure=enabled" label to them. Use the kubectl label command to add the missing secure=enabled label to the secure-monolith Pod. Afterwards, we can check and see that our labels have been updated.',u.default.createElement("code",null,u.default.createElement("br",null),"kubectl label pods secure-monolith 'secure=enabled'",u.default.createElement("br",null),"kubectl get pods secure-monolith --show-labels",u.default.createElement("br",null)),"Now that our pods are correctly labeled, let's view the list of endpoints on the monolith service:",u.default.createElement("code",null,u.default.createElement("br",null),"kubectl describe services monolith | grep Endpoints",u.default.createElement("br",null)),"And we have one! Let's test this out by hitting one of our nodes again.",u.default.createElement("code",null,u.default.createElement("br",null),"gcloud compute instances list",u.default.createElement("br",null),"curl -k https://","<","EXTERNAL_IP",">",":31000",u.default.createElement("br",null)),"Bam! Houston, we have contact.",u.default.createElement("h3",null,"Deploying Applications with Kubernetes"),"The goal is to get you ready for scaling and managing containers in production. That's where Deployments come in. Deployments are a declarative way to ensure that the number of Pods running is equal to the desired number of Pods, specified by the user.",u.default.createElement("br",null),"The main benefit of Deployments is in abstracting away the low level details of managing Pods. Behind the scenes Deployments use Replica Sets to manage starting and stopping the Pods. If Pods need to be updated or scaled, the Deployment will handle that. Deployment also handles restarting Pods if they happen to go down for some reason. Let's look at a quick example:",u.default.createElement("br",null),"Pods are tied to the lifetime of the Node they are created on. In the example above, Node3 went down (taking a Pod with it). Insteading of manually creating a new Pod and finding a Node for it, your Deployment created a new Pod and started it on Node2. That's pretty cool!",u.default.createElement("br",null),"It's time to combine everything you learned about Pods and Services to break up the monolith application into smaller Services using Deployments.",u.default.createElement("h3",null,"Creating Deployments"),"We're going to break the monolith app into three separate pieces:",u.default.createElement("li",null,"auth - Generates JWT tokens for authenticated users."),u.default.createElement("li",null,"hello - Greet authenticated users."),u.default.createElement("li",null,"frontend - Routes traffic to the auth and hello services."),"We are ready to create deployments, one for each service. Afterwards, we'll define internal services for the auth and hello deployments and an external service for the frontend deployment. Once finished you'll be able to interact with the microservices just like with Monolith only now each piece will be able to be scaled and deployed, independently! Get started by examining the auth deployment configuration file.",u.default.createElement("code",null,u.default.createElement("br",null),"cat deployments/",u.default.createElement("a",{href:"https://github.com/googlecodelabs/orchestrate-with-kubernetes/blob/master/kubernetes/deployments/auth.yaml"},"auth.yaml "),u.default.createElement("br",null)),u.default.createElement("br",null),"The deployment is creating 1 replica, and we're using version 1.0.0 of the auth container.",u.default.createElement("br",null),"TWhen you run the kubectl create command to create the auth deployment it will make one pod that conforms to the data in the Deployment manifest. This means you can scale the number of Pods by changing the number specified in the Replicas field. Anyway, let's go ahead and create our deployment object:",u.default.createElement("code",null,u.default.createElement("br",null),"kubectl create -f deployments/auth.yaml",u.default.createElement("br",null)),"It's time to create a service for your auth deployment. Use the kubectl create command to create the auth service:",u.default.createElement("code",null,u.default.createElement("br",null),"kubectl create -f services/auth.yaml",u.default.createElement("br",null)),"Now do the same thing to create and expose the hello Deployment",u.default.createElement("code",null,u.default.createElement("br",null),"kubectl create -f deployments/hello.yaml",u.default.createElement("br",null),"kubectl create -f services/hello.yaml",u.default.createElement("br",null)),"And one more time to create and expose the frontend Deployment.",u.default.createElement("code",null,u.default.createElement("br",null),"kubectl create configmap nginx-frontend-conf --from-file=nginx/frontend.conf",u.default.createElement("br",null),"kubectl create -f deployments/frontend.yaml",u.default.createElement("br",null),"kubectl create -f services/frontend.yaml",u.default.createElement("br",null)),"There is one more step to creating the frontend because we needed to store some configuration data with the container. Interact with the frontend by grabbing it's External IP and then curling to it:",u.default.createElement("code",null,u.default.createElement("br",null),"kubectl get services frontend",u.default.createElement("br",null),"curl -k https://","<","EXTERNAL_IP",">",":31000",u.default.createElement("br",null)),"And you get a hello response back!")}}]),t}(i.Component);t.default=s},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(0),s=a(u),c=n(48),d=a(c),f=n(49),h=a(f),m=function(e){function t(){return r(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),i(t,[{key:"render",value:function(){return s.default.createElement("div",null,s.default.createElement("h3",null,"Regions and Zones"),"Certain Compute Engine resources live in regions or zones. A region is a specific geographical location where you can run your resources. Each region has one or more zones. For example, the us-central1 region denotes a region in the Central United States that has zones us-central1-a, us-central1-b, us-central1-c, and us-central1-f. Resources that live in a zone are referred to as zonal resources.",s.default.createElement("b",null,"Virtual machine Instances and persistent disks live in a zone."),"To attach a persistent disk to a virtual machine instance, both resources must be in the same zone. ",s.default.createElement("b",null,"Similarly, if you want to assign a static IP address to an instance, the instance must be in the same region as the static IP."),"In Google Cloud Platform, networks provide data connections into and out of your cloud resources (mostly Compute Engine instances). ",s.default.createElement("b",null,"Securing your Networks is critical to securing your data and controlling access to your resources."),"Google Cloud Platform supports Projects, Networks, and Subnetworks to provide flexible, logical isolation of unrelated resources.",s.default.createElement("br",null),s.default.createElement("img",{src:d.default,className:"gcp-project",alt:"gcp-project"})," ",s.default.createElement("br",null),s.default.createElement("b",null,"Networks")," directly connect your resources to each other and to the outside world. Networks, using Firewalls, also house the access policies for incoming and outgoing connections. ",s.default.createElement("b",null,"Networks can be Global (offering horizontal scalability across multiple Regions) or Regional (offering low-latency within a single Region)."),"Subnetworks allow you to group related resources (Compute Engine instances) into RFC1918 private address spaces. Subnetworks can only be Regional. A subnetwork can be in auto mode or custom mode. An ",s.default.createElement("b",null,"auto mode network")," has one subnet per region, each with a predetermined IP range and gateway. These subnets are created automatically when you create the auto mode network, and each subnet has the same name as the overall network.",s.default.createElement("br",null),"A ",s.default.createElement("b",null,"custom mode network")," has no subnets at creation. In order to create an instance in a custom mode network, you must first create a subnetwork in that region and specify its IP range. A custom mode network can have zero, one, or many subnets per region.",s.default.createElement("h3",null,"Review the default network"),"When a new project is created, a default network configuration provides each region with an auto subnet network. You can create up to four additional networks in a project. Additional networks can be auto subnet networks, custom subnet networks, or legacy networks. Each instance created within a subnetwork is assigned an IPv4 address from that subnetwork range. Let's review your network. Click Products & services > VPC network.",s.default.createElement("h3",null,"Firewalls"),'See Subnetworks and firewall rules for more information on how you can use firewall rules to isolate subnetworks. Each network has a default firewall that blocks all inbound traffic to instances. To allow traffic to come into an instance, you must create "allow" rules for the firewall. Additionally, the default firewall allows traffic from instances unless you configure it to block outbound connections using an "egress" firewall configuration. Therefore, by default you can create "allow" rules for traffic you wish to pass ingress, and "deny" rules for traffic you wish to restrict egress. You may also create a default-deny policy for egress and prohibit external connections entirely. In general, it is recommended to configure the least permissive firewall rule that will support the kind of traffic you are trying to pass. For example, if you need to allow traffic to reach some instances, but restrict traffic from reaching others, create rules that allow traffic to the intended instances only. This more restrictive configuration is more predictable than a large firewall rule that allows traffic to all of the instances. If you want to have "deny" rules to override certain "allow" rules, you can set priority levels on each rule and the rule with the lowest numbered priority will be evaluated first. Creating large and complex sets of override rules can lead to allowing or blocking traffic that is not intended. The default network has automatically created firewall rules, which are shown below. No manually created network of any type has automatically created firewall rules. For all networks except the default network, you must create any firewall rules you need. The ingress firewall rules automatically created for the default network are as follows:',s.default.createElement("code",null,s.default.createElement("br",null),"default-allow-internal",s.default.createElement("br",null)),"Allows network connections of any protocol and port between instances on the network.",s.default.createElement("code",null,s.default.createElement("br",null),"default-allow-ssh",s.default.createElement("br",null)),"Allows SSH connections from any source to any instance on the network over TCP port 22.",s.default.createElement("code",null,s.default.createElement("br",null),"default-allow-rdp",s.default.createElement("br",null)),"Allows RDP connections from any source to any instance on the network over TCP port 3389.",s.default.createElement("code",null,s.default.createElement("br",null),"default-allow-icmp",s.default.createElement("br",null)),"Allows ICMP traffic from any source to any instance on the network. To review the default Firewall rules, in the Console click Products & services > VPC networks > Firewall rules.",s.default.createElement("h3",null,"Creating a custom network"),"Creating a new network with custom subnet ranges When manually assigning subnetwork ranges, you first create a custom subnet network, then create the subnetworks that you want within a region. You do not have to specify subnetworks for all regions right away, or even at all, but you cannot create instances in regions that have no subnetwork defined. When you create a new subnetwork, its name must be unique in that project for that region, even across networks. The same name can appear twice in a project as long as each one is in a different region. Because this is a subnetwork, there is no network-level IPv4 range or gateway IP, so none will be displayed. You can either create your custom network with the console or with the cloud shell. We'll show you both, but you have to decide which method to use while taking the lab. For example, you cannot go through a section using the instructions for the console, then go through the same section using gcloud command line.",s.default.createElement("h3",null,"Create Custom Network with the Console"),s.default.createElement("ol",null,s.default.createElement("li",null,"To create a customer network, click Products & services > Networking > VPC network."),s.default.createElement("li",null,'Click Create VPC Network and name it "taw-custom-network".'),s.default.createElement("li",null,"On the Custom tab create:"),s.default.createElement("li",null,"Subnet name: subnet-us-central"),s.default.createElement("li",null,"Region: us-central1"),s.default.createElement("li",null,"IP address range: 10.0.0.0/16")),"Now click + Add subnetwork and add 2 more subnets in their respective regions: subnet-europe-west, 10.1.0.0/16 subnet-asia-east, 10.2.0.0/16 Click Create to to finish. At this point, the network has routes to the Internet and to any instances that you might create. But, it has no firewall rules allowing access to instances, even from other instances. You must create firewall rules to allow access.",s.default.createElement("h3",null,"Create custom network with Cloud Shell"),"Create subnet-europe-west with an IP prefix",s.default.createElement("code",null,s.default.createElement("br",null),"gcloud compute networks subnets create subnet-europe-west \\",s.default.createElement("br",null),"--network taw-custom-network \\",s.default.createElement("br",null),"--region europe-west1 \\",s.default.createElement("br",null),"--range 10.1.0.0/16",s.default.createElement("br",null)),"(Output)",s.default.createElement("code",null,s.default.createElement("br",null),"Created [https://www.googleapis.com/compute/v1/projects/cloud-network-module-101/regions/europe-west1/subnetworks/subnet-europe-west].",s.default.createElement("br",null),"NAME                REGION        NETWORK             RANGE",s.default.createElement("br",null),"subnet-europe-west  europe-west1  taw-custom-network  10.1.0.0/16"),s.default.createElement("br",null),"List your networks. If you created an auto subnet network in the prior section, those subnets will be listed as well.",s.default.createElement("code",null,s.default.createElement("br",null),"gcloud compute networks subnets list \\",s.default.createElement("br",null),"--network taw-custom-network"),s.default.createElement("br",null),"(Output) NAME                REGION        NETWORK             RANGE",s.default.createElement("code",null,s.default.createElement("br",null),"subnet-europe-west  europe-west1  taw-custom-network  10.2.0.0/16",s.default.createElement("br",null),"subnet-asia-east    asia-east1    taw-custom-network  10.1.0.0/16",s.default.createElement("br",null),"subnet-us-central   us-central1   taw-custom-network  10.0.0.0/16"),s.default.createElement("br",null),"At this point, the network has routes to the Internet and to any instances that you might create. But, it has no firewall rules allowing access to instances, even from other instances. You must create firewall rules to allow access. Adding Firewall Rules To allow access to VM instances, you must apply firewall rules. We will use an instance tag to apply the firewall rule to your VM instances.The firewall rule will apply to any VM using the same instance tag. Note: Instance Tags are used by networks and firewalls to apply certain firewall rules to tagged VM instances. For example, if there are several instances that perform the same task, such as serving a large website, you can tag these instances with a shared word or term and then use that tag to allow HTTP access to those instances with a firewall rule. Tags are also reflected in the metadata server, so you can use them for applications running on your instances. Start by opening the firewall to allow HTTP Internet requests, then you'll add more firewall rules. Firewall rules can be added using the Console or Cloud Shell.",s.default.createElement("h3",null,"Add firewall rules through the Console"),"Navigate to VPC networking with the Menu and click on the taw-custom-networking network: Click Add Firewall rule: Enter the values so that screenshould look like this:",s.default.createElement("br",null),s.default.createElement("img",{src:h.default,className:"firewall",alt:"gcp-project"})," ",s.default.createElement("br",null),"Click Create and wait until the command succeeds. Next you'll create the additional firewall rules you'll need.",s.default.createElement("h3",null,"Create additional firewall rules using Cloud Shell"),s.default.createElement("h4",null,"ICMP"),s.default.createElement("code",null,'gcloud compute firewall-rules create "nw101-allow-icmp" --allow icmp --network "taw-custom-network"'),s.default.createElement("br",null),s.default.createElement("h4",null,"Internal communication"),s.default.createElement("code",null,'gcloud compute firewall-rules create "nw101-allow-internal" --allow tcp:0-65535,udp:0-65535,icmp --network "taw-custom-network" --source-ranges "10.0.0.0/16","10.2.0.0/16","10.1.0.0/16"'),s.default.createElement("br",null),s.default.createElement("h4",null,"ssh"),s.default.createElement("code",null,'gcloud compute firewall-rules create "nw101-allow-ssh" --allow tcp:22 --network "taw-custom-network" --target-tags "ssh"'),s.default.createElement("br",null),"Review your network in the Console. Note: What about those Routes I see in the Network console? GCP Networking uses Routes to direct packets between subnetworks and to the Internet. Whenever a subnetwork is created (or pre-created) in your Network, routes are automatically created in each region to allow packets to route between subnetworks. These cannot be modified.",s.default.createElement("br",null),s.default.createElement("b",null,"Additional Routes can be created to send traffic to an instance, a VPN gateway, or default internet gateway."),"These Routes can be modified to tailor the desired network architecture. Routes and Firewalls work together to ensure your traffic gets where it needs to go.",s.default.createElement("h3",null,"Connecting to your VMs and checking latency"),"Click on the VPC network button in the left menu to see your entire network. The taw-custom-network has three subnetworks and the firewalls rules applied.",s.default.createElement("h4",null,"Creating a VM in each zone"),"For this section of the lab, start in Cloud Shell. Run these commands to create an instance in each of the three subnets. Be sure to note the external IPs for later use in this lab.",s.default.createElement("code",null,s.default.createElement("br",null),"gcloud compute instances create us-test-01 \\",s.default.createElement("br",null),"--subnet subnet-us-central \\",s.default.createElement("br",null),"--zone us-central1-a \\",s.default.createElement("br",null),"--tags ssh,http",s.default.createElement("br",null)),"(Output)",s.default.createElement("code",null,s.default.createElement("br",null),"Created [https://www.googleapis.com/compute/v1/projects/cloud-network-module-101/zones/us-central1-a/instances/us-test-01]. NAME        ZONE           MACHINE_TYPE   PREEMPTIBLE  INTERNAL_IP  EXTERNAL_IP     STATUS us-test-01  us-central1-a  n1-standard-1               10.0.0.2     104.198.230.22  RUNNING",s.default.createElement("br",null)),"Creating other two instances",s.default.createElement("code",null,s.default.createElement("br",null),"gcloud compute instances create europe-test-01 \\ --subnet subnet-europe-west \\ --zone europe-west1-b \\ --tags ssh,http"),s.default.createElement("code",null,s.default.createElement("br",null),"gcloud compute instances create asia-test-01 \\ --subnet subnet-asia-east \\ --zone asia-east1-a \\ --tags ssh,http",s.default.createElement("br",null)),s.default.createElement("h3",null,"Verify you can connect your VM"),"Now we'll do a few exercises to test the connection to your VMs. Switch back to the Console and navigate to Compute Engine. Click the SSH button corresponding to the us-test-01 instance. This opens an SSH connection to the instance in a new window. In the SSH window of us-test-01, type the following commands to use an ICMP echo against europe-test-01 and asia-test-01, adding the external IP address for each VM in-line:",s.default.createElement("code",null,s.default.createElement("br",null),"ping -c 3 ","<","europe-test-01-external-ip-address",">"," ",s.default.createElement("br",null)),"Output (Example)",s.default.createElement("code",null,s.default.createElement("br",null),"PING 35.187.149.67 (35.187.149.67) 56(84) bytes of data.",s.default.createElement("br",null),"64 bytes from 35.187.149.67: icmp_seq=1 ttl=76 time=152 ms",s.default.createElement("br",null),"64 bytes from 35.187.149.67: icmp_seq=2 ttl=76 time=152 ms",s.default.createElement("br",null),"64 bytes from 35.187.149.67: icmp_seq=3 ttl=76 time=152 ms ",s.default.createElement("br",null)),"Now check that SSH also works for instances europe-test-01 and asia-test-01. Try an ICMP echo against us-test-01.",s.default.createElement("h3",null,"Use ping to measure latency"),"Use ping to measure the latency between instances between all the regions. For example, to observe the latency from the US Central region to the Europe West region, run the following command after opening an SSH window on the us-test-01:",s.default.createElement("code",null,s.default.createElement("br",null),"ping -c 3 europe-test-01",s.default.createElement("br",null)),"Command output PING europe-test-01.c.cloud-network-module-101.internal (10.2.0.2) 56(84) bytes of data.",s.default.createElement("code",null,s.default.createElement("br",null),"64 bytes from europe-test-01.c.cloud-network-module-101.internal (10.2.0.2): icmp_seq=1 ttl=64 time=105 ms",s.default.createElement("br",null),"64 bytes from europe-test-01.c.cloud-network-module-101.internal (10.2.0.2): icmp_seq=2 ttl=64 time=104 ms",s.default.createElement("br",null),"64 bytes from europe-test-01.c.cloud-network-module-101.internal (10.2.0.2): icmp_seq=3 ttl=64 time=104 ms",s.default.createElement("br",null)),'The latency you get back is the "Round Trip Time" (RTT) - the time the packet takes to get from us-central-test-01 to europe-test-01. Ping uses the ICMP Echo Request and Echo Reply Messages to test connectivity.',s.default.createElement("h4",null,"Things to think about: What is the latency you see between regions?")," What would you expect under ideal conditions? What is special about the connection from europe-test-01 to asia-test-01?",s.default.createElement("h4",null,"Internal DNS: How is DNS provided for VM instances?"),"Each instance has a metadata server that also acts as a DNS resolver for that instance. DNS lookups are performed for instance names. The metadata server itself stores all DNS information for the local network and queries Google's public DNS servers for any addresses outside of the local network. An internal fully qualified domain name (FQDN) for an instance looks like ",s.default.createElement("h4",null,"this:hostName.c.[PROJECT_ID].internal"),"You can always connect from one instance to another using this FQDN. If you want to connect to an instance using, for example, just hostName, you need information from the internal DNS resolver that is provided as part of Compute Engine.")}}]),t}(u.Component);t.default=m},function(e,t){},function(e,t){},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(0),u=function(e){return e&&e.__esModule?e:{default:e}}(i),s=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),o(t,[{key:"render",value:function(){return u.default.createElement("div",null,u.default.createElement("h3",null,"Simple Traceroute and Performance Testing"),"Traceroute is a tool to trace the path between two hosts. A traceroute can be a helpful first step to uncovering many different types of network problems. Support or network engineers often ask for a traceroute when diagnosing network issues.",u.default.createElement("h4",null,"Functionality:"),' Traceroute shows all Layer 3 (routing layer) hops between the hosts. This is achieved by sending packets to the remote destination with increasing TTL (Time To Live) value (starting at 1). The TTL field is a field in the IP packet which gets decreased by one at every router. Once the TTL hits zero, the packet gets discarded and a "TTL exceeded" ICMP message is returned to the sender. This approach is used to avoid routing loops; packets cannot loop continuously because the TTL field will eventually decrement to 0. By default the OS sets the TTL value to a high value (64, 128, 255 or similar), so this should only ever be reached in abnormal situations. So traceroute sends packets first with TTL value of 1, then TTL value of 2, etc., causing these packets to expire at the first/second/etc. router in the path. It then takes the source IP/host of the ICMP TTL exceeded message returned to show the name/IP of the intermediate hop. Once the TTL is high enough, the packet reaches the destination, and the destination responds. The type of packet sent varies by implementation. Under Linux, UDP packets are sent to a high, unused port. So the final destination responds with an ICMP Port Unreachable. Windows and the mtr tool by default use ICMP echo requests (like ping), so the final destinations answers with an ICMP echo reply. Let\'s try it out by setting up a traceroute on one of your virtual machines. For this step ssh in to the VMs. Install these performance tools in the SSH window:',u.default.createElement("code",null,u.default.createElement("br",null),"sudo apt-get update",u.default.createElement("br",null),"sudo apt-get -y install traceroute mtr tcpdump iperf whois host dnsutils siege",u.default.createElement("br",null),"traceroute www.icann.org",u.default.createElement("br",null)),"Now try a few other destinations and also from other sources: VMs in the same region or another region (eu1-vm, asia1-vm, w2-vm) www.wikipedia.org www.adcash.com bad.horse (works best if you increase max TTL, so traceroute -m 255 bad.horse) Anything else you can think of To stop traceroute, Ctrl-c in the SSH window and return to the command line.",u.default.createElement("h3",null,"Use iperf to test performance"),u.default.createElement("h4",null,"Between two hosts"),"When you use iperf to test the performance between two hosts, one side needs to be set up as the iperf server to accept connections. Important:The following commands transfer Gigabytes of traffic between regions, which is charged at Internet egress rates. Be mindful of this when using them. If you are not on a whitelisted project, or in the free trial, you might want to skip, or only skim. (Costs should be less than $1 USD.) Try a very simple test: SSH into the VM and install the performance tools:",u.default.createElement("code",null,u.default.createElement("br",null),"sudo apt-get update",u.default.createElement("br",null),"sudo apt-get -y install traceroute mtr tcpdump iperf whois host dnsutils siege",u.default.createElement("br",null)),"SSH into other VMs (will be used a server) and run:",u.default.createElement("code",null,u.default.createElement("br",null),"iperf -s #run in server mode",u.default.createElement("br",null)),"On first VM (will be used as a Client) run this iperf:",u.default.createElement("code",null,u.default.createElement("br",null),"iperf -c us-test-01 #run in client mode, connection to eu1-vm",u.default.createElement("br",null)),"You will see some output like this:",u.default.createElement("code",null,u.default.createElement("br",null),"------------------------------------------------------------",u.default.createElement("br",null),"Client connecting to eu-vm, TCP port 5001",u.default.createElement("br",null),"TCP window size: 45.0 KByte (default)",u.default.createElement("br",null),"------------------------------------------------------------",u.default.createElement("br",null)),"On europe-test-01 use Ctrl-c to exit the server side when you're done.",u.default.createElement("code",null,u.default.createElement("br",null),"[  3] local 10.20.0.2 port 35923 connected with 10.30.0.2 port 5001",u.default.createElement("br",null),"[ ID] Interval       Transfer     Bandwidth",u.default.createElement("br",null),"[  3]  0.0-10.0 sec   298 MBytes   249 Mbits/sec",u.default.createElement("br",null)),u.default.createElement("h3",null,"Between VMs within a region"),"Now you'll deploy one instance (ex. us-test-01)in one zone and another inatnce in a different zone (ex.us-test-02). You will see that within a region, the bandwidth is limited by the 2 Gbit/s per core egress cap. In Cloud Shell, create us-test-02:",u.default.createElement("code",null,u.default.createElement("br",null),"gcloud compute instances create us-test-02 \\",u.default.createElement("br",null),"--subnet subnet-us-central \\",u.default.createElement("br",null),"--zone us-central1-b \\",u.default.createElement("br",null),"--tags ssh,http",u.default.createElement("br",null)),"SSH to us-test-02 and install performance tools:",u.default.createElement("code",null,u.default.createElement("br",null),"sudo apt-get update",u.default.createElement("br",null),"sudo apt-get -y install traceroute mtr tcpdump iperf whois host dnsutils siege ",u.default.createElement("br",null)),"Between regions you reach much lower limits, mostly due to limits on TCP window size and single stream performance. You can increase bandwidth between hosts by using other parameters, like UDP. On europe-test-01 run:",u.default.createElement("code",null,u.default.createElement("br",null),"iperf -s -u #iperf server side",u.default.createElement("br",null)),"On us-test-01 run:",u.default.createElement("code",null,u.default.createElement("br",null),"iperf -c europe-test-01 -u -b 2G #iperf client side - send 2 Gbits/s",u.default.createElement("br",null)),"This should be able to achieve a higher speed between EU and US. Even higher speeds can be achieved by running a bunch of TCP iperfs in parallel. Let's test this. In the SSH window for us-test-01 run:",u.default.createElement("code",null,u.default.createElement("br",null),"iperf -s",u.default.createElement("br",null)),"In the SSH window for us-test-02 run:",u.default.createElement("code",null,u.default.createElement("br",null),"iperf -c us-test-01 -P 20",u.default.createElement("br",null)),"The combined bandwidth should be really close to the maximum achievable bandwidth. Test a few more combinations. If you use Linux on your laptop you can test against your laptop as well. (You can also try iperf3 which is available for many OSes, but this is not part of the lab.) As you can see, to reach the maximum bandwidth, just running a single TCP stream (for example, file copy) is not sufficient; you need to have several TCP sessions in parallel. Reasons are: TCP parameters such as Window Size; and functions such as Slow Start. See TCP/IP Illustrated for excellent information on this and all other TCP/IP topics. Tools like bbcp can help to copy files as fast as possible by parallelizing transfers and using configurable window size. Optional: If you have large enough quota, spin up some 2/4/8/16 core VMs in the lab network, install iperf, and see what performance you can reach. Where is the limit?")}}]),t}(i.Component);t.default=s},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(0),u=function(e){return e&&e.__esModule?e:{default:e}}(i),s=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),o(t,[{key:"render",value:function(){return u.default.createElement("div",null,u.default.createElement("h1",null,"Several ways to deploy App in App Engine from Eclipse"),u.default.createElement("h3",null,"Python"),u.default.createElement("h4",null,"Using Pydev Google App Engine Project: [recommended]"),u.default.createElement("ol",null,u.default.createElement("li",null," Create a new project from Eclipse > File > New > Projects "),u.default.createElement("li",null," Choose Pydev Google App Engine Project "),u.default.createElement("li",null," When asked for Google App Engine directory locate where it is "),u.default.createElement("li",null," Right button to the project >Pydev Google App Engine > manage / upload to upload directly from eclipse ")),u.default.createElement("h4",null,"Creating the project Using Pydev project: [Not recommended]"),u.default.createElement("ol",null,u.default.createElement("li",null,"Create a Pydev project from Eclipse > File > New Pydev project"),u.default.createElement("li",null,"Right click the project. Click Pydev Python Path > Choose external libraries"),u.default.createElement("li",null,"Locate where the Google App engine folder is"),u.default.createElement("li",null,"Choose the libraries that you need"),u.default.createElement("li",null,"Upload the project with Google App Engine Launcher")),u.default.createElement("h3",null,"Java"),u.default.createElement("h4",null,"Java (web application servlet):"),u.default.createElement("ol",null,u.default.createElement("li",null,"Create a web application by File > Other > Web Application project"),u.default.createElement("li",null,"Select / Unselect Google Web toolkit (Generally unselect, not supported by cloud platform)"),u.default.createElement("li",null,"Project name (test), package (com.test)"),u.default.createElement("li",null,"Finish")),u.default.createElement("h4",null,"Java (Maven Build):"),u.default.createElement("ol",null,u.default.createElement("li",null,"Window > Preferences > Maven > Archetypes >",u.default.createElement("a",{href:"http://www.avajava.com/tutorials/lessons/how-do-i-perform-an-archetype-create-from-eclipse.html"}," Add Remote Catalog… "),u.default.createElement("br",null),"Catalog File: http://repo1.maven.org/maven2/archetype-catalog.xml"),u.default.createElement("li",null,"create as Maven project and when ask archtype search for Google and choose as required."),u.default.createElement("li",null," For “hello world” Blank skeleton type web page: add index.jsp in source>main>webapp directory")))}}]),t}(i.Component);t.default=s},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(0),u=function(e){return e&&e.__esModule?e:{default:e}}(i),s=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),o(t,[{key:"render",value:function(){return u.default.createElement("div",null,u.default.createElement("h1",null,"Mongo in Kubernetes with StatefulSets"),"From conventionall point of view database can not be run in a container. Because containers are stateless and databases can not be stateless. However Kubernetes StatefulSet API object make that impossible happened. This post is based on",u.default.createElement("a",{href:"https://medium.com/google-cloud/mongodb-replica-sets-with-kubernetes-d96606bd9474"}," ","this"," "),"and"," ",u.default.createElement("a",{href:"http://blog.kubernetes.io/2017/01/running-mongodb-on-kubernetes-with-statefulsets.html"}," ","this"," "),"blog posts. I just copy pasted from those posts.",u.default.createElement("h2",null,"StorageClass"),"The storage class tells Kubernetes what kind of storage to use for the database nodes. You can set up many different types of StorageClasses in a ton of different environments. For example, if you run Kubernetes in your own datacenter, you can use GlusterFS. On GCP, your storage choices are SSDs and hard disks. There are currently drivers for AWS, Azure, Google Cloud, GlusterFS, OpenStack Cinder, vSphere, Ceph RBD, and Quobyte. The configuration for the StorageClass looks like",u.default.createElement("a",{href:"https://github.com/thesandlord/mongo-k8s-sidecar/blob/master/example/StatefulSet/googlecloud_ssd.yaml"}," ","this"),".",u.default.createElement("h2",null,"Headless Service"),"Now you have created the Storage Class, you need to make a Headless Service. These are just like normal Kubernetes Services, except they don’t do any load balancing for you. When combined with StatefulSets, they can give you unique DNS addresses that let you directly access the pods! This is perfect for creating MongoDB replica sets, because our app needs to connect to all of the MongoDB nodes individually. The configuration for the Headless Service looks like",u.default.createElement("a",{href:"https://github.com/thesandlord/mongo-k8s-sidecar/blob/master/example/StatefulSet/mongo-statefulset.yaml"}," ","this"),". You can tell this is a Headless Service because the clusterIP is set to “None.” Other than that, it looks exactly the same as any normal Kubernetes Service.",u.default.createElement("h2",null,"StatefulSet"),"The StatefulSet actually runs MongoDB and orchestrates everything together. StatefulSets differ from Kubernetes ReplicaSets (not to be confused with MongoDB replica sets!) in certain ways that makes them more suited for stateful applications. Unlike Kubernetes ReplicaSets, pods created under a StatefulSet have a few unique attributes. The name of the pod is not random, instead each pod gets an ordinal name. Combined with the Headless Service, this allows pods to have stable identification. In addition, pods are created one at a time instead of all at once, which can help when bootstrapping a stateful system. You can read more about StatefulSets in the documentation. Just like before, this “sidecar” container will configure the MongoDB replica set automatically. A “sidecar” is a helper container which helps the main container do its work. The configuration for the StatefulSet looks like",u.default.createElement("a",{href:"https://github.com/thesandlord/mongo-k8s-sidecar/blob/master/example/StatefulSet/mongo-statefulset.yaml"}," ","this"),"It’s a little long, but fairly straightforward. The first second describes the StatefulSet object. Then, we move into the Metadata section, where you can specify labels and the number of replicas. Next comes the pod spec. The terminationGracePeriodSeconds is used to gracefully shutdown the pod when you scale down the number of replicas, which is important for databases! Then the configurations for the two containers is shown. The first one runs MongoDB with command line flags that configure the replica set name. It also mounts the persistent storage volume to /data/db, the location where MongoDB saves its data. The second container runs the sidecar. Finally, there is the volumeClaimTemplates. This is what talks to the StorageClass we created before to provision the volume. It will provision a 100 GB disk for each MongoDB replica.",u.default.createElement("h4",null,"Steps are simple:"),u.default.createElement("ol",null,u.default.createElement("li",null," create the Cluster "),u.default.createElement("li",null,u.default.createElement("code",null,"git clone https://github.com/thesandlord/mongo-k8s-sidecar.git",u.default.createElement("br",null),"cd ./mongo-k8s-sidecar/example/StatefulSet/ ",u.default.createElement("br",null))),u.default.createElement("li",null,"Create the Storage Class by"," ",u.default.createElement("code",null,"kubectl apply -f googlecloud_ssd.yaml")),u.default.createElement("li",null,"Deploying the Headless Service and StatefulSet by",u.default.createElement("code",null,"kubectl apply -f mongo-statefulset.yaml")),u.default.createElement("li",null,"Wait for the MongoDB Replica Set to be fully deployed;"," ",u.default.createElement("code",null,"kubectl get statefulset")),u.default.createElement("li",null,"Initiating and Viewing the MongoDB replica set;"," ",u.default.createElement("code",null,"kubectl get pods")),u.default.createElement("li",null,"connect to the first Replica Set membe by"," ",u.default.createElement("code",null,"kubectl exec -ti mongo-0 mongo")),u.default.createElement("li",null,"Initiate the replica set with a default configuration by"," ",u.default.createElement("code",null,"rs.initiate()")),u.default.createElement("li",null,"Print the replica set configuration by ",u.default.createElement("code",null,"rs.conf()")),u.default.createElement("li",null,"scale up by"," ",u.default.createElement("code",null,"kubectl scale --replicas=5 statefulset mongo"),"and scale down by"," ",u.default.createElement("code",null,"kubectl scale --replicas=3 statefulset mongo")),u.default.createElement("li",null,"To connect Mongo in code: Each pod in a StatefulSet backed by a Headless Service will have a stable DNS name. The template follows this format: ",u.default.createElement("code",null,"pod-name.service-name")," This means the DNS names for the MongoDB replica set are: mongo-0.mongo, mongo-1.mongo, mongo-2.mongo You can use these names directly in the connection string URI of your app. In this case, the connection string URI would be:",u.default.createElement("code",null,'"mongodb://mongo-0.mongo,mongo-1.mongo,mongo-2.mongo:27017/dbname_?"')),u.default.createElement("li",null,"Save some data in the Mongo",u.default.createElement("code",null,u.default.createElement("br",null),"rs0:PRIMARY> show dbs",u.default.createElement("br",null),"admin   0.000GB",u.default.createElement("br",null),"config  0.000GB",u.default.createElement("br",null),"local   0.000GB",u.default.createElement("br",null),"rs0:PRIMARY> use testdb",u.default.createElement("br",null),"switched to db testdb",u.default.createElement("br",null),"rs0:PRIMARY> db.sometable.insert(","{",'somefield:"somedata"',"}",")",u.default.createElement("br",null),"WriteResult(","{",' "nInserted" : 1 ',"}",")",u.default.createElement("br",null),"rs0:PRIMARY> db.sometable.find()",u.default.createElement("br",null),"{",' "_id" : ObjectId("5a7b71802a636a07aefe2132"), "somefield" : "somedata" ',"}",u.default.createElement("br",null)))))}}]),t}(i.Component);t.default=s},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(0),u=function(e){return e&&e.__esModule?e:{default:e}}(i),s=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),o(t,[{key:"render",value:function(){return u.default.createElement("div",null,u.default.createElement("h1",null,"Network in Google Cloud"),u.default.createElement("h2",null,"Projects"),"Projects are the outermost container and are used to group resources that share the same trust boundary. Many developers map Projects to teams since each Project has its own access policy (IAM) and member list. Projects also serve as a collector of billing and quota details reflecting resource consumption. Projects contain Networks which contain Subnetworks, Firewall rules, and Routes (see below architecture diagrams for illustration).",u.default.createElement("h2",null,"Networks"),"Networks directly connect your resources to each other and to the outside world. Networks, using Firewalls, also house the access policies for incoming and outgoing connections. Networks can be Global (offering horizontal scalability across multiple Regions) or Regional (offering low-latency within a single Region).",u.default.createElement("h2",null,"Subnetworks"),"Subnetworks allow you to group related resources (Compute Engine instances) into RFC1918 private address spaces. Subnetworks can only be Regional. A subnetwork can be in auto mode or custom mode. An auto mode network has one subnet per region, each with a predetermined IP range and gateway. These subnets are created automatically when you create the auto mode network, and each subnet has the same name as the overall network. A custom mode network has no subnets at creation. In order to create an instance in a custom mode network, you must first create a subnetwork in that region and specify its IP range. A custom mode network can have zero, one, or many subnets per region.",u.default.createElement("h2",null,"The Default Network"),"When any Project is created, a single Network named default is created for you. The default Network has the following 2 firewall rules defined for network traffic:",u.default.createElement("code",null,u.default.createElement("br",null),"default-deny-all-ingress"),": Deny all incoming traffic",u.default.createElement("code",null,u.default.createElement("br",null),"default-allow-all-egress"),": Allow all outbound traffic ",u.default.createElement("br",null),"The following firewall rules are created for specific protocols and the roles they play in the default Network.",u.default.createElement("code",null,u.default.createElement("br",null),"default-allow-internal"),": Allows network connections of any protocol and port between instances on the network.",u.default.createElement("code",null,u.default.createElement("br",null),"default-allow-ssh"),": Allows SSH connections from any source to any instance on the network over TCP port 22.",u.default.createElement("code",null,u.default.createElement("br",null),"default-allow-rdp"),": Allows RDP connections from any source to any instance on the network over TCP port 3389.",u.default.createElement("code",null,u.default.createElement("br",null),"default-allow-icmp"),": Allows ICM",u.default.createElement("h2",null,"PRIORITY"),"Each firewall rule has a Priority value from 0-65535 inclusive. Relative priority values are used to determine precedence of conflicting rules. Lower priority value implies higher precedence. When unspecified, a priority value of 1000 is used. If a packet matches conflicting rules with the same priority, the deny policy takes precedence. Important:"," ",u.default.createElement("b",null,"Since the default Network allows relatively open access, it is a recommended best practice that you delete it."),"You cannot delete the default Network unless another Network is present. A Project requires at least one Network. Because this lab has the user-created Network mynetwork, we can delete the default Network.",u.default.createElement("h2",null,"Stateful Firewalls"),"GCP Firewalls are stateful: for each initiated connection tracked by allow rules in one direction, the return traffic is automatically allowed, regardless of any rules.",u.default.createElement("h2",null,"Firewall Rules and IAM"),'The privilege of creating, modifying, and deleting firewall rules is reserved for the compute.securityAdmin role by IAM. Users assigned to the compute.networkAdmin role are able to safely view and list firewall rules that might apply to their projects. See the Network-specific IAM roles section later in this lab for more on this topic. Remember: All instances are configured with a "hidden" firewall rule that drops TCP connections after 10 minutes of inactivity. TCP keep-alives can be used to alter this behavior. See documentation for details on how to do that.',u.default.createElement("h2",null,"Allow Ingress Rules "),"First mynetwork is created by",u.default.createElement("code",null,u.default.createElement("br",null),"gcloud compute networks create mynetwork --mode=auto",u.default.createElement("br",null)),"Because by default all ingress are denied, so logical next step towards opening network one at a step is allowing ingress. Example of adding some ingress firewall rules to allow us to SSH and ping the instances using the gcloud command line in Cloud Shell:",u.default.createElement("br",null),"Network=mynetwork, icmp firewall rule name=mynetwork-allow-icmp, ssh rule name=mynetwork-allow-ssh, internal allow rule name=mynetwork-allow-internal",u.default.createElement("code",null," ",u.default.createElement("br",null),"gcloud beta compute firewall-rules create mynetwork-allow-icmp --network mynetwork --action ALLOW --direction INGRESS --rules icmp",u.default.createElement("br",null),"gcloud beta compute firewall-rules create mynetwork-allow-ssh --network mynetwork --action ALLOW --direction INGRESS --rules tcp:22",u.default.createElement("br",null),"gcloud beta compute firewall-rules create mynetwork-allow-internal --network mynetwork --action ALLOW --direction INGRESS --rules all --source-ranges 10.128.0.0/9",u.default.createElement("br",null),'gcloud beta compute firewall-rules list filter="network:mynetwork"'," "),"When you create a VM on this netwrok, you create by",u.default.createElement("code",null,u.default.createElement("br",null),"gcloud compute instances create mynet-us-vm --zone=us-central1-a --network=mynetwork",u.default.createElement("br",null),"gcloud compute instances create mynet-eu-vm --zone=europe-west1-b --network=mynetwork",u.default.createElement("br",null)),"Because it is custom network subnetwork is not automatically created per region. To create it,",u.default.createElement("code",null,u.default.createElement("br",null),"gcloud compute networks subnets create privatesubnet --network=privatenet \\ --region=us-central1 --range=10.0.0.0/24 --enable-private-ip-google-access",u.default.createElement("br",null)),"TO create a VM in that network,",u.default.createElement("code",null,"gcloud compute instances create privatenet-us-vm --zone=us-central1-f \\ --subnet=privatesubnet"),"To create firewall rule in a custom subnet networks First create a privatenet with custom subnet:",u.default.createElement("code",null,"gcloud compute networks create privatenet --mode=custom"),u.default.createElement("code",null,u.default.createElement("br",null),"gcloud beta compute firewall-rules create privatenet-allow-icmp \\ --network privatenet --action ALLOW --direction INGRESS --rules icmp",u.default.createElement("br",null),"gcloud beta compute firewall-rules create privatenet-allow-ssh \\ --network privatenet --action ALLOW --direction INGRESS --rules tcp:22",u.default.createElement("br",null),"gcloud beta compute firewall-rules create privatenet-allow-internal \\ --network privatenet --action ALLOW --direction INGRESS --rules all \\ --source-ranges 10.0.0.0/24",u.default.createElement("br",null)),"To create VMs in that network,",u.default.createElement("code",null,u.default.createElement("br",null),"gcloud compute instances create privatenet-us-vm --zone=us-central1-f \\ --subnet=privatesubnet"),u.default.createElement("h2",null,"Deny Egress Rules"),"Now the firewall is created for basic ingress, we can establish specific deny rule. We were able to ping from mynet-eu-vm to mynet-us-vm, If we want to deny that, Egress firewall rules require a --destination-ranges flag.",u.default.createElement("code",null,u.default.createElement("br",null),"gcloud beta compute firewall-rules create mynetwork-deny-icmp \\ --network mynetwork --action DENY --direction EGRESS --rules icmp \\ --destination-ranges 10.132.0.2 --priority 500",u.default.createElement("br",null),'gcloud beta compute firewall-rules list \\ --filter="network:mynetwork AND name=mynetwork-deny-icmp" ',u.default.createElement("br",null)),"Command Output:",u.default.createElement("code",null,u.default.createElement("br",null),"NAME NETWORK DIRECTION PRIORITY SRC_RANGES DEST_RANGES ALLOW DENY ",u.default.createElement("br",null),"project1-net-deny-icmp project1-net EGRESS 500 10.132.0.2 icmp ",u.default.createElement("br",null)),"Go back to the mynet-us-vm SSH shell and re-run the ping command. You should no longer see the nice icmp results printing, the command seems to hang. This is the deny firewall rule in action. Ctrl+c to exit.",u.default.createElement("b",null,"Note 1: This rule was created with the direction EGRESS. Since ping is a bi-directional protocol, this will block ICMP as traffic leaves the VMs virtual NIC. If this rule were to be created with the INGRESS direction, the ICMP packets would be allowed to leave the VM's virtual NIC."),u.default.createElement("br",null),u.default.createElement("b",null,"Note 2: If you supply both --source-ranges and --source-tags, you can allow traffic from both external IP ranges and internal instances identified by tags. The firewall matches either-or the source-range or source-tag."),u.default.createElement("h2",null,"Cloud Routes"),"If you want traffic from specific instances to specific ranges to be routed in a specific way, you can use Google Cloud Routes to set up the destination for this traffic. You can route traffic based on instance tags and destination range, and you can set the next hop to either:",u.default.createElement("li",null,"A specific instance (by instancename or IP)"),u.default.createElement("li",null,"A VPN Tunnel"),u.default.createElement("li",null,"The default internet gateway"),"If multiple routes exist, the more specific route will be used. If there are multiple of those, the lowest priority value is used. Between Subnetworks, routes are automatically created implicitly at lowest priority value. Those routes cannot be changed or deleted.",u.default.createElement("h3",null,"Convert to a NAT gateway"),"Let's convert an instance to a NAT gateway so privatenet-us-vm can talk to the Internet without having an IP assigned. first create the VM:",u.default.createElement("code",null,u.default.createElement("br",null),"gcloud compute instances create privatenet-ksakib --zone=us-central1-c \\ --subnet=privatesubnet --can-ip-forward ",u.default.createElement("br",null)),"Within privatenet, there are 2 instances: privatenet-nat and privatenet-us-vm. Both have a public IP, but you will remove the public IP from privatenet-us-vm. After the public IP is removed, you can SSH into privatenet-us-vm through privatenet-nat. You might want to use a NAT gateway either for additional filtering or if you want to egress from specific static IP addresses. In this case we just set it up without specific functionality.",u.default.createElement("h3",null,"CREATE NAT GATEWAY"),"The first step was already taken when the instance was created: the IP forwarding was set to On, which we did via the",u.default.createElement("code",null,"--can-ip-forward")," flag. This flag cannot be changed after the VM has been created. Now you will tag privatenet-us-vm and create a route through the gateway. In Cloud Shell run the following:",u.default.createElement("code",null,u.default.createElement("br",null),"gcloud compute instances add-tags privatenet-us-vm --zone us-central1-f --tags nat-me",u.default.createElement("br",null),"gcloud compute routes create nat-route --network privatenet --destination-range 0.0.0.0/0 --next-hop-instance privatenet-nat --next-hop-instance-zone us-central1-c --tags nat-me --priority 800",u.default.createElement("br",null)),"SSH privatenet-bastion and activate IP forwarding and NAT on the Linux side:",u.default.createElement("code",null,u.default.createElement("br",null),"sudo sysctl -w net.ipv4.ip_forward=1",u.default.createElement("br",null),"sudo iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE",u.default.createElement("br",null),"ssh privatenet-us-vm ",u.default.createElement("br",null)),u.default.createElement("br",null),"Test if eberything is working properly by running follcowing test commands",u.default.createElement("code",null," ",u.default.createElement("br",null)," gsutil ls gs://gcp-next2017-security-bootcamp/README",u.default.createElement("br",null)),"(Output:)",u.default.createElement("code",null,u.default.createElement("br",null)," gs://gcp-next2017-security-bootcamp/README ",u.default.createElement("br",null),u.default.createElement("br",null)," gsutil cat gs://gcp-next2017-security-bootcamp/README",u.default.createElement("br",null)),"(Output:)",u.default.createElement("code",null,u.default.createElement("br",null)," Last updated: Wed 2017-02-22",u.default.createElement("br",null)," Files used in the Google Cloud Platform Next 2017 Security Bootcamp codelabs. ",u.default.createElement("br",null),u.default.createElement("br",null)," curl ifconfig.co",u.default.createElement("br",null)),"(Output:)",u.default.createElement("code",null,u.default.createElement("br",null)," xxx.xxx.xxx.xxx (IP of privatenet-bastion)",u.default.createElement("br",null)),"NAT is working: privetnet-us-vm appears to the outside from privatenet-bastion IP address.")}}]),t}(i.Component);t.default=s},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(0),u=function(e){return e&&e.__esModule?e:{default:e}}(i),s=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),o(t,[{key:"render",value:function(){return u.default.createElement("div",null,u.default.createElement("h1",null,"Puppet in Google Cloud"),"In this tutorial we will implement a very simple Master-Agent architecture with two Comoute Engine instance",u.default.createElement("ol",null,u.default.createElement("li",null,"Create a small(1 sahred vCPU + 1.7 GB memory) Compute Engine instance with the OS Ubuntu 16.04 xenial and with 'Allow HTTP traffic' chcked under Firewall section and name is"," ",u.default.createElement("b",null,"puppet-agent.")," "),u.default.createElement("li",null,"Create another Compute Engine instance but this time a with 1 vCPU + 3.75 GB memory with the same OS (Ubuntu 16.04 xenial) but this time default firewall option is fine. No need to check http or https traffic alllow. Name the instance as ",u.default.createElement("b",null,"puppet-master")),u.default.createElement("li",null,"SSH into puppet-master and run the follwing comands to install",u.default.createElement("a",{href:"https://docs.puppet.com/puppet/3.8/install_debian_ubuntu.html"}," ","puppet")," ","into the puppet-master",u.default.createElement("code",null,u.default.createElement("br",null)," wget"," ",u.default.createElement("a",{href:"https://apt.puppetlabs.com/"},"https://apt.puppetlabs.com/puppetlabs-release-pc1-xenial.deb"),u.default.createElement("br",null)," sudo dpkg -i puppetlabs-release-pc1-xenial.deb",u.default.createElement("br",null)," sudo apt-get update",u.default.createElement("br",null)," sudo apt-get install puppetserver")),u.default.createElement("li",null,"Start the server by ",u.default.createElement("code",null,"sudo systemctl start puppetserver")),u.default.createElement("li",null,"Make sure puppet server is running by"," ",u.default.createElement("code",null,"sudo systemctl status puppetserver",u.default.createElement("br",null))),'We should see a line that says "active (running)"',u.default.createElement("li",null,"Now that we've ensured the server is running, we'll configure it to start at boot:",u.default.createElement("code",null,"sudo systemctl enable puppetserver")),u.default.createElement("li",null,"Now SSH in to the puppet agent and run the follwing commands to install",u.default.createElement("a",{href:"https://docs.puppet.com/puppet/3.8/install_debian_ubuntu.html"}," ","puppet")," ","into puppet-Agent",u.default.createElement("code",null,u.default.createElement("br",null)," wget"," ",u.default.createElement("a",{href:"https://apt.puppetlabs.com/"},"https://apt.puppetlabs.com/puppetlabs-release-pc1-xenial.deb"),u.default.createElement("br",null)," sudo dpkg -i puppetlabs-release-pc1-xenial.deb",u.default.createElement("br",null)," sudo apt-get update",u.default.createElement("br",null)," sudo apt-get install puppet-agent",u.default.createElement("br",null)," sudo systemctl start puppet",u.default.createElement("br",null)," sudo systemctl enable puppet")),u.default.createElement("li",null,"The first time Puppet runs on an agent node, it sends a certificate signing request to the Puppet master. To list all unsigned certificate requests, run the following command on the Puppet master:",u.default.createElement("code",null,"sudo /opt/puppetlabs/bin/puppet cert list")),u.default.createElement("li",null,"We'll use the --all option to sign certificate:",u.default.createElement("code",null,"sudo /opt/puppetlabs/bin/puppet cert sign --all",u.default.createElement("br",null)),"You can also do a single sign by"," ",u.default.createElement("code",null,"puppet-agent.c.YOUR_PROJECT_ID.internal")),u.default.createElement("li",null,"In the puppet-master, go to folder /etc/puppetlabs/code/environments/production/manifests/ by",u.default.createElement("code",null,u.default.createElement("br",null),"cd /etc/puppetlabs/code/environments/production/manifests/")," ","and make a manifest file site.pp as",u.default.createElement("code",null,u.default.createElement("br",null),"node /agent/","{",u.default.createElement("br",null),"   include webserver",u.default.createElement("br",null),"}")),u.default.createElement("li",null,"Now go to modules directory by"," ",u.default.createElement("code",null,"cd /etc/puppetlabs/code/environments/production/modules"),"and then make a directory by",u.default.createElement("code",null,"sudo mkdir -p webserver/manifests ")),u.default.createElement("li",null,"in the above manifests directory create a file init.pp as",u.default.createElement("code",null,u.default.createElement("br",null),"class webserver ","{",u.default.createElement("br",null),"  package ","{"," 'apache2':",u.default.createElement("br",null),"   ensure => present",u.default.createElement("br",null),"   ","}",u.default.createElement("br",null),"  file ","{","'/var/www/html/index.html': # resource type file and filename",u.default.createElement("br",null),"   ensure => present, # make sure it exists",u.default.createElement("br",null),'   content => "',"<h1>","This page is inatalled from Puppet Master","</h1>",'", # content of the file',u.default.createElement("br",null),"   ","}",u.default.createElement("br",null),"}"))))}}]),t}(i.Component);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(56);n.d(t,"BrowserRouter",function(){return a.a});var r=n(58);n.d(t,"HashRouter",function(){return r.a});var l=n(24);n.d(t,"Link",function(){return l.a});var o=n(60);n.d(t,"MemoryRouter",function(){return o.a});var i=n(61);n.d(t,"NavLink",function(){return i.a});var u=n(62);n.d(t,"Prompt",function(){return u.a});var s=n(63);n.d(t,"Redirect",function(){return s.a});var c=n(25);n.d(t,"Route",function(){return c.a});var d=n(13);n.d(t,"Router",function(){return d.a});var f=n(64);n.d(t,"StaticRouter",function(){return f.a});var h=n(65);n.d(t,"Switch",function(){return h.a});var m=n(66);n.d(t,"matchPath",function(){return m.a});var p=n(67);n.d(t,"withRouter",function(){return p.a})},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(1),i=n.n(o),u=n(0),s=n.n(u),c=n(2),d=n.n(c),f=n(57),h=n.n(f),m=n(13),p=function(e){function t(){var n,l,o;a(this,t);for(var i=arguments.length,u=Array(i),s=0;s<i;s++)u[s]=arguments[s];return n=l=r(this,e.call.apply(e,[this].concat(u))),l.history=h()(l.props),o=n,r(l,o)}return l(t,e),t.prototype.componentWillMount=function(){i()(!this.props.history,"<BrowserRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { BrowserRouter as Router }`.")},t.prototype.render=function(){return s.a.createElement(m.a,{history:this.history,children:this.props.children})},t}(s.a.Component);p.propTypes={basename:d.a.string,forceRefresh:d.a.bool,getUserConfirmation:d.a.func,keyLength:d.a.number,children:d.a.node},t.a=p},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=n(1),i=a(o),u=n(3),s=a(u),c=n(9),d=n(4),f=n(10),h=a(f),m=n(23),p=function(){try{return window.history.state||{}}catch(e){return{}}},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,s.default)(m.canUseDOM,"Browser history needs a DOM");var t=window.history,n=(0,m.supportsHistory)(),a=!(0,m.supportsPopStateOnHashChange)(),o=e.forceRefresh,u=void 0!==o&&o,f=e.getUserConfirmation,b=void 0===f?m.getConfirmation:f,g=e.keyLength,y=void 0===g?6:g,w=e.basename?(0,d.stripTrailingSlash)((0,d.addLeadingSlash)(e.basename)):"",E=function(e){var t=e||{},n=t.key,a=t.state,r=window.location,l=r.pathname,o=r.search,u=r.hash,s=l+o+u;return(0,i.default)(!w||(0,d.hasBasename)(s,w),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+s+'" to begin with "'+w+'".'),w&&(s=(0,d.stripBasename)(s,w)),(0,c.createLocation)(s,a,n)},v=function(){return Math.random().toString(36).substr(2,y)},k=(0,h.default)(),P=function(e){l(q,e),q.length=t.length,k.notifyListeners(q.location,q.action)},x=function(e){(0,m.isExtraneousPopstateEvent)(e)||S(E(e.state))},O=function(){S(E(p()))},T=!1,S=function(e){T?(T=!1,P()):k.confirmTransitionTo(e,"POP",b,function(t){t?P({action:"POP",location:e}):I(e)})},I=function(e){var t=q.location,n=C.indexOf(t.key);-1===n&&(n=0);var a=C.indexOf(e.key);-1===a&&(a=0);var r=n-a;r&&(T=!0,N(r))},j=E(p()),C=[j.key],_=function(e){return w+(0,d.createPath)(e)},R=function(e,a){(0,i.default)(!("object"===(void 0===e?"undefined":r(e))&&void 0!==e.state&&void 0!==a),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var l=(0,c.createLocation)(e,a,v(),q.location);k.confirmTransitionTo(l,"PUSH",b,function(e){if(e){var a=_(l),r=l.key,o=l.state;if(n)if(t.pushState({key:r,state:o},null,a),u)window.location.href=a;else{var s=C.indexOf(q.location.key),c=C.slice(0,-1===s?0:s+1);c.push(l.key),C=c,P({action:"PUSH",location:l})}else(0,i.default)(void 0===o,"Browser history cannot push state in browsers that do not support HTML5 history"),window.location.href=a}})},A=function(e,a){(0,i.default)(!("object"===(void 0===e?"undefined":r(e))&&void 0!==e.state&&void 0!==a),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var l=(0,c.createLocation)(e,a,v(),q.location);k.confirmTransitionTo(l,"REPLACE",b,function(e){if(e){var a=_(l),r=l.key,o=l.state;if(n)if(t.replaceState({key:r,state:o},null,a),u)window.location.replace(a);else{var s=C.indexOf(q.location.key);-1!==s&&(C[s]=l.key),P({action:"REPLACE",location:l})}else(0,i.default)(void 0===o,"Browser history cannot replace state in browsers that do not support HTML5 history"),window.location.replace(a)}})},N=function(e){t.go(e)},M=function(){return N(-1)},L=function(){return N(1)},D=0,G=function(e){D+=e,1===D?((0,m.addEventListener)(window,"popstate",x),a&&(0,m.addEventListener)(window,"hashchange",O)):0===D&&((0,m.removeEventListener)(window,"popstate",x),a&&(0,m.removeEventListener)(window,"hashchange",O))},H=!1,W=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=k.setPrompt(e);return H||(G(1),H=!0),function(){return H&&(H=!1,G(-1)),t()}},U=function(e){var t=k.appendListener(e);return G(1),function(){G(-1),t()}},q={length:t.length,action:"POP",location:j,createHref:_,push:R,replace:A,go:N,goBack:M,goForward:L,block:W,listen:U};return q};t.default=b},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(1),i=n.n(o),u=n(0),s=n.n(u),c=n(2),d=n.n(c),f=n(59),h=n.n(f),m=n(13),p=function(e){function t(){var n,l,o;a(this,t);for(var i=arguments.length,u=Array(i),s=0;s<i;s++)u[s]=arguments[s];return n=l=r(this,e.call.apply(e,[this].concat(u))),l.history=h()(l.props),o=n,r(l,o)}return l(t,e),t.prototype.componentWillMount=function(){i()(!this.props.history,"<HashRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { HashRouter as Router }`.")},t.prototype.render=function(){return s.a.createElement(m.a,{history:this.history,children:this.props.children})},t}(s.a.Component);p.propTypes={basename:d.a.string,getUserConfirmation:d.a.func,hashType:d.a.oneOf(["hashbang","noslash","slash"]),children:d.a.node},t.a=p},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},l=n(1),o=a(l),i=n(3),u=a(i),s=n(9),c=n(4),d=n(10),f=a(d),h=n(23),m={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+(0,c.stripLeadingSlash)(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:c.stripLeadingSlash,decodePath:c.addLeadingSlash},slash:{encodePath:c.addLeadingSlash,decodePath:c.addLeadingSlash}},p=function(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)},b=function(e){return window.location.hash=e},g=function(e){var t=window.location.href.indexOf("#");window.location.replace(window.location.href.slice(0,t>=0?t:0)+"#"+e)},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,u.default)(h.canUseDOM,"Hash history needs a DOM");var t=window.history,n=(0,h.supportsGoWithoutReloadUsingHash)(),a=e.getUserConfirmation,l=void 0===a?h.getConfirmation:a,i=e.hashType,d=void 0===i?"slash":i,y=e.basename?(0,c.stripTrailingSlash)((0,c.addLeadingSlash)(e.basename)):"",w=m[d],E=w.encodePath,v=w.decodePath,k=function(){var e=v(p());return(0,o.default)(!y||(0,c.hasBasename)(e,y),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+e+'" to begin with "'+y+'".'),y&&(e=(0,c.stripBasename)(e,y)),(0,s.createLocation)(e)},P=(0,f.default)(),x=function(e){r(Y,e),Y.length=t.length,P.notifyListeners(Y.location,Y.action)},O=!1,T=null,S=function(){var e=p(),t=E(e);if(e!==t)g(t);else{var n=k(),a=Y.location;if(!O&&(0,s.locationsAreEqual)(a,n))return;if(T===(0,c.createPath)(n))return;T=null,I(n)}},I=function(e){O?(O=!1,x()):P.confirmTransitionTo(e,"POP",l,function(t){t?x({action:"POP",location:e}):j(e)})},j=function(e){var t=Y.location,n=A.lastIndexOf((0,c.createPath)(t));-1===n&&(n=0);var a=A.lastIndexOf((0,c.createPath)(e));-1===a&&(a=0);var r=n-a;r&&(O=!0,D(r))},C=p(),_=E(C);C!==_&&g(_);var R=k(),A=[(0,c.createPath)(R)],N=function(e){return"#"+E(y+(0,c.createPath)(e))},M=function(e,t){(0,o.default)(void 0===t,"Hash history cannot push state; it is ignored");var n=(0,s.createLocation)(e,void 0,void 0,Y.location);P.confirmTransitionTo(n,"PUSH",l,function(e){if(e){var t=(0,c.createPath)(n),a=E(y+t);if(p()!==a){T=t,b(a);var r=A.lastIndexOf((0,c.createPath)(Y.location)),l=A.slice(0,-1===r?0:r+1);l.push(t),A=l,x({action:"PUSH",location:n})}else(0,o.default)(!1,"Hash history cannot PUSH the same path; a new entry will not be added to the history stack"),x()}})},L=function(e,t){(0,o.default)(void 0===t,"Hash history cannot replace state; it is ignored");var n=(0,s.createLocation)(e,void 0,void 0,Y.location);P.confirmTransitionTo(n,"REPLACE",l,function(e){if(e){var t=(0,c.createPath)(n),a=E(y+t);p()!==a&&(T=t,g(a));var r=A.indexOf((0,c.createPath)(Y.location));-1!==r&&(A[r]=t),x({action:"REPLACE",location:n})}})},D=function(e){(0,o.default)(n,"Hash history go(n) causes a full page reload in this browser"),t.go(e)},G=function(){return D(-1)},H=function(){return D(1)},W=0,U=function(e){W+=e,1===W?(0,h.addEventListener)(window,"hashchange",S):0===W&&(0,h.removeEventListener)(window,"hashchange",S)},q=!1,B=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=P.setPrompt(e);return q||(U(1),q=!0),function(){return q&&(q=!1,U(-1)),t()}},F=function(e){var t=P.appendListener(e);return U(1),function(){U(-1),t()}},Y={length:t.length,action:"POP",location:R,createHref:N,push:M,replace:L,go:D,goBack:G,goForward:H,block:B,listen:F};return Y};t.default=y},function(e,t,n){"use strict";var a=n(14);t.a=a.a},function(e,t,n){"use strict";function a(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}var r=n(0),l=n.n(r),o=n(2),i=n.n(o),u=n(25),s=n(24),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f=function(e){var t=e.to,n=e.exact,r=e.strict,o=e.location,i=e.activeClassName,f=e.className,h=e.activeStyle,m=e.style,p=e.isActive,b=e.ariaCurrent,g=a(e,["to","exact","strict","location","activeClassName","className","activeStyle","style","isActive","ariaCurrent"]);return l.a.createElement(u.a,{path:"object"===(void 0===t?"undefined":d(t))?t.pathname:t,exact:n,strict:r,location:o,children:function(e){var n=e.location,a=e.match,r=!!(p?p(a,n):a);return l.a.createElement(s.a,c({to:t,className:r?[f,i].filter(function(e){return e}).join(" "):f,style:r?c({},m,h):m,"aria-current":r&&b},g))}})};f.propTypes={to:s.a.propTypes.to,exact:i.a.bool,strict:i.a.bool,location:i.a.object,activeClassName:i.a.string,className:i.a.string,activeStyle:i.a.object,style:i.a.object,isActive:i.a.func,ariaCurrent:i.a.oneOf(["page","step","location","true"])},f.defaultProps={activeClassName:"active",ariaCurrent:"true"},t.a=f},function(e,t,n){"use strict";var a=n(17);t.a=a.a},function(e,t,n){"use strict";var a=n(18);t.a=a.a},function(e,t,n){"use strict";var a=n(20);t.a=a.a},function(e,t,n){"use strict";var a=n(21);t.a=a.a},function(e,t,n){"use strict";var a=n(8);t.a=a.a},function(e,t,n){"use strict";var a=n(22);t.a=a.a}]);