'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = streamRenderer;
function streamRenderer(req, res, stream, htmlData, options) {
  var segments = htmlData.split('<div id="root">');
  res.write(segments[0] + '<div id="root">');
  stream.pipe(res, { end: false });
  stream.on('end', function () {
    if (options.onEndReplace) {
      segments[1] = options.onEndReplace(segments[1]);
    }
    res.write(segments[1]);
    res.end();
  });
}